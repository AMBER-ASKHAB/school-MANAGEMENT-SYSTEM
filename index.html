<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel – Deshani Scholars School</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/Admin/Admin/style.css">

</head>
                        
<body>
    <!-- Topbar -->
    <div class="topbar">
        <div class="logo">
            <img src="/Admin/Admin/Screenshot 2025-08-09 185729.png" alt="Logo">
            <span>CHUNJHHJHDYEUHFYUDHYEUDHUEDH</span>
        </div>
    </div>

    <!-- Layout -->
    <div class="main">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2>Admin Portal</h2>
            <nav>
                <ul>
                    <li class="active">
                        <a href="#" onclick="showSection('dashboard', event)">
                            <i class="fas fa-home"></i>
                            Dashboard
                        </a>
                    </li>
                    
                    <!-- School Setup -->
                    <li class="has-submenu" data-dashboard="school-setup-dashboard">
                        <a href="#" onclick="openManagementDashboard(event, this, 'school-setup-dashboard')">
                            <i class="fas fa-cogs"></i>
                            School Setup
                        </a>
                        <ul class="submenu">
                            <li><a href="#" onclick="showContentInDashboard('school-setup-dashboard', 'school-info', event)"><i class="fas fa-building"></i> School Information</a></li>
                            <li><a href="#" onclick="showContentInDashboard('school-setup-dashboard', 'bank-details', event)"><i class="fas fa-university"></i> Bank Details</a></li>
                            <li><a href="#" onclick="showContentInDashboard('school-setup-dashboard', 'classes-config', event)"><i class="fas fa-chalkboard"></i> Classes Configuration</a></li>
                            <li><a href="#" onclick="showContentInDashboard('school-setup-dashboard', 'class-sections', event)"><i class="fas fa-layer-group"></i> Class Sections</a></li>
                        </ul>
                    </li>
                    
                    <!-- Staff Management -->
                    <li class="has-submenu" data-dashboard="staff-management-dashboard">
                        <a href="#" onclick="openManagementDashboard(event, this, 'staff-management-dashboard')">
                            <i class="fas fa-users"></i>
                            Staff Management
                        </a>
                        <ul class="submenu">
                            <li><a href="#" onclick="showContentInDashboard('staff-management-dashboard', 'add-staff', event)"><i class="fas fa-user-plus"></i> Add New Staff</a></li>
                            <li><a href="#" onclick="showContentInDashboard('staff-management-dashboard', 'view-staff', event)"><i class="fas fa-list"></i> View All Staff</a></li>
                            <li><a href="#" onclick="showContentInDashboard('staff-management-dashboard', 'staff-education', event)"><i class="fas fa-graduation-cap"></i> Staff Education</a></li>
                            <li><a href="#" onclick="showContentInDashboard('staff-management-dashboard', 'staff-salary', event)"><i class="fas fa-money-bill-wave"></i> Salary Records</a></li>
                            <li><a href="#" onclick="showContentInDashboard('staff-management-dashboard', 'staff-attendance', event)"><i class="fas fa-calendar-check"></i> Attendance</a></li>
                        </ul>
                    </li>

                    <!-- Teacher Management -->
                    <li class="has-submenu" data-dashboard="teacher-management-dashboard">
                        <a href="#" onclick="openManagementDashboard(event, this, 'teacher-management-dashboard')">
                            <i class="fas fa-chalkboard-teacher"></i>
                            Teacher Management
                        </a>
                        <ul class="submenu">
                            <li><a href="#" onclick="showContentInDashboard('teacher-management-dashboard', 'add-teacher', event)"><i class="fas fa-user-plus"></i> Add New Teacher</a></li>
                            <li><a href="#" onclick="showContentInDashboard('teacher-management-dashboard', 'view-teachers', event)"><i class="fas fa-list"></i> View All Teachers</a></li>
                            <li><a href="#" onclick="showContentInDashboard('teacher-management-dashboard', 'teacher-schedule', event)"><i class="fas fa-calendar-alt"></i> Teacher Schedule</a></li>
                            <li><a href="#" onclick="showContentInDashboard('teacher-management-dashboard', 'teacher-subjects', event)"><i class="fas fa-book"></i> Subject Assignment</a></li>
                            <li><a href="#" onclick="showContentInDashboard('teacher-management-dashboard', 'teacher-performance', event)"><i class="fas fa-chart-line"></i> Performance Review</a></li>
                        </ul>
                    </li>

                    <!-- Classes Management -->
                    <li class="has-submenu" data-dashboard="classes-management-dashboard">
                        <a href="#" onclick="openManagementDashboard(event, this, 'classes-management-dashboard')">
                            <i class="fas fa-school"></i>
                            Classes Management
                        </a>
                        <ul class="submenu">
                            <li><a href="#" onclick="showContentInDashboard('classes-management-dashboard', 'add-class', event)"><i class="fas fa-plus-circle"></i> Add New Class</a></li>
                            <li><a href="#" onclick="showContentInDashboard('classes-management-dashboard', 'view-classes', event)"><i class="fas fa-list"></i> View All Classes</a></li>
                            <li><a href="#" onclick="showContentInDashboard('classes-management-dashboard', 'class-sections', event)"><i class="fas fa-layer-group"></i> Manage Sections</a></li>
                            <li><a href="#" onclick="showContentInDashboard('classes-management-dashboard', 'class-timetable', event)"><i class="fas fa-clock"></i> Class Timetable</a></li>
                            <li><a href="#" onclick="showContentInDashboard('classes-management-dashboard', 'class-subjects', event)"><i class="fas fa-book-open"></i> Subject Configuration</a></li>
                        </ul>
                    </li>

                    <!-- Fee Management -->
                    <li class="has-submenu" data-dashboard="fee-management-dashboard">
                        <a href="#" onclick="openManagementDashboard(event, this, 'fee-management-dashboard')">
                            <i class="fas fa-dollar-sign"></i>
                            Fee Management
                        </a>
                        <ul class="submenu">
                            <li><a href="#" onclick="showContentInDashboard('fee-management-dashboard', 'fee-charges', event)"><i class="fas fa-cog"></i> Fee Head Setup</a></li>
                            <li><a href="#" onclick="showContentInDashboard('fee-management-dashboard', 'fee-setup', event)"><i class="fas fa-file-invoice-dollar"></i> Fee & Charges Setup</a></li>
                            <li><a href="#" onclick="showContentInDashboard('fee-management-dashboard', 'challan-form', event)"><i class="fas fa-receipt"></i> Challan Form</a></li>
                            <li><a href="#" onclick="showContentInDashboard('fee-management-dashboard', 'generated-forms', event)"><i class="fas fa-file-alt"></i> Generated Forms</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="#" onclick="logout()">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            Logout
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Workspace -->
        <main class="workspace">
            <!-- Dashboard Section -->
            <section id="dashboard" class="workspace-section active">
                <h2>Dashboard</h2>
                <div class="dashboard-cards">
                    <div class="dashboard-card">
                        <i class="fas fa-users"></i>
                        <div class="dashboard-card-content">
                            <h3>152</h3>
                            <p>Total Staff Members</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <div class="dashboard-card-content">
                            <h3>85</h3>
                            <p>Teaching Staff</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <i class="fas fa-user-tie"></i>
                        <div class="dashboard-card-content">
                            <h3>67</h3>
                            <p>Non-Teaching Staff</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <i class="fas fa-dollar-sign"></i>
                        <div class="dashboard-card-content">
                            <h3>₨ 2.5M</h3>
                            <p>Monthly Salary Budget</p>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <h3 style="color: #8b0000; margin-bottom: 15px;">Management Modules</h3>
                    <div class="management-cards">
                        <div class="management-card card-purple" onclick="event.preventDefault(); event.stopPropagation(); toggleManagementMenu('school', event)" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-cogs"></i>
                            <h3>School Setup</h3>
                            <p>Configure school information, bank details, classes & sections</p>
                            <button class="more-info-btn">
                                More Info <i class="fas fa-arrow-circle-right"></i>
                            </button>
                        </div>

                        <div class="management-card card-red" onclick="event.preventDefault(); event.stopPropagation(); toggleManagementMenu('staff', event)">
                            <i class="fas fa-users"></i>
                            <h3>Staff Management</h3>
                            <p>Manage all staff members, education, salary & attendance</p>
                            <button class="more-info-btn">
                                More Info <i class="fas fa-arrow-circle-right"></i>
                            </button>
                        </div>

                        <div class="management-card card-blue" onclick="event.preventDefault(); event.stopPropagation(); toggleManagementMenu('teacher', event)">
                            <i class="fas fa-chalkboard-teacher"></i>
                            <h3>Teacher Management</h3>
                            <p>Handle teachers, schedules, subjects & performance</p>
                            <button class="more-info-btn">
                                More Info <i class="fas fa-arrow-circle-right"></i>
                            </button>
                        </div>

                        <div class="management-card card-green" onclick="event.preventDefault(); event.stopPropagation(); toggleManagementMenu('classes', event)">
                            <i class="fas fa-school"></i>
                            <h3>Classes Management</h3>
                            <p>Organize classes, sections, timetables & subjects</p>
                            <button class="more-info-btn">
                                More Info <i class="fas fa-arrow-circle-right"></i>
                            </button>
                        </div>

                        <div class="management-card card-orange" onclick="event.preventDefault(); event.stopPropagation(); toggleManagementMenu('fee', event)">
                            <i class="fas fa-dollar-sign"></i>
                            <h3>Fee Management</h3>
                            <p>Setup fees, generate challans & manage payments</p>
                            <button class="more-info-btn">
                                More Info <i class="fas fa-arrow-circle-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Staff Management Dashboard Section -->
            <section id="staff-management-dashboard" class="workspace-section">
                <h2><i class="fas fa-users"></i> Staff Management</h2>
                <p style="color: #666; margin-bottom: 10px;">Manage all staff members, education records, salary and attendance</p>
                <div style="background: #f0f8ff; border-left: 4px solid #2196F3; padding: 12px 15px; margin-bottom: 20px; border-radius: 6px;">
                    <small style="color: #1976D2;"><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Select an option below to view its details. The sidebar menu will update to show your current location.</small>
                </div>
                
                <div class="submenu-dashboard-grid">
                    <div class="submenu-option-card" onclick="showContentInDashboard('staff-management-dashboard', 'add-staff', event)">
                        <div class="option-icon" style="background: #8b0000;">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h3>Add New Staff</h3>
                        <p>Register new staff members with complete details</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('staff-management-dashboard', 'view-staff', event)">
                        <div class="option-icon" style="background: #2196F3;">
                            <i class="fas fa-list"></i>
                        </div>
                        <h3>View All Staff</h3>
                        <p>Browse and manage all staff records</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('staff-management-dashboard', 'staff-education', event)">
                        <div class="option-icon" style="background: #9C27B0;">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3>Staff Education</h3>
                        <p>Manage educational qualifications and records</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('staff-management-dashboard', 'staff-salary', event)">
                        <div class="option-icon" style="background: #4CAF50;">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <h3>Salary Records</h3>
                        <p>View and manage staff salary information</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('staff-management-dashboard', 'staff-attendance', event)">
                        <div class="option-icon" style="background: #FF9800;">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <h3>Attendance</h3>
                        <p>Track and manage staff attendance records</p>
                    </div>
                </div>

                <!-- Content Area for Staff Management -->
                <div id="staff-management-content" class="dashboard-content-area">
                    <!-- Add New Staff Content -->
                    <div id="add-staff" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-user-plus"></i> Add New Staff Member</h3>
                        <form id="addStaffForm" onsubmit="submitStaffForm(event)">
                            <div class="form-grid">
                                <div class="field">
                                    <label>Full Name *</label>
                                    <input type="text" id="stf_name" name="stf_name" required placeholder="Enter full name">
                                </div>
                                <div class="field">
                                    <label>Staff Number *</label>
                                    <input type="text" id="stf_staffnumber" name="stf_staffnumber" required placeholder="e.g., STF001">
                                </div>
                                <div class="field">
                                    <label>Gender *</label>
                                    <select id="stf_gender" name="stf_gender" required>
                                        <option value="">--Select--</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Date of Birth *</label>
                                    <input type="date" id="stf_dob" name="stf_dob" required>
                                </div>
                                <div class="field">
                                    <label>Designation *</label>
                                    <input type="text" id="stf_designation" name="stf_designation" required placeholder="e.g., Senior Teacher">
                                </div>
                                <div class="field">
                                    <label>Joining Date *</label>
                                    <input type="date" id="stf_joiningdate" name="stf_joiningdate" required>
                                </div>
                                <div class="field">
                                    <label>Contact Number *</label>
                                    <input type="text" id="stf_contact" name="stf_contact" required placeholder="03XX-XXXXXXX">
                                </div>
                                <div class="field">
                                    <label>Email</label>
                                    <input type="email" id="stf_email" name="stf_email" placeholder="email@example.com">
                                </div>
                                <div class="field">
                                    <label>Monthly Salary *</label>
                                    <input type="number" id="stf_monthlysalary" name="stf_monthlysalary" required placeholder="50000">
                                </div>
                                <div class="field">
                                    <label>NTN Number</label>
                                    <input type="text" id="stf_ntnnumber" name="stf_ntnnumber" placeholder="Optional">
                                </div>
                                <div class="field">
                                    <label>Marital Status</label>
                                    <select id="stf_status" name="stf_status">
                                        <option value="">--Select--</option>
                                        <option value="Married">Married</option>
                                        <option value="Unmarried">Unmarried</option>
                                        <option value="Widow">Widow</option>
                                        <option value="Widower">Widower</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Staff Type *</label>
                                    <select id="stf_teacherorstaff" name="stf_teacherorstaff" required>
                                        <option value="">--Select--</option>
                                        <option value="true">Teaching Staff</option>
                                        <option value="false">Non-Teaching Staff</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-grid full-width">
                                <div class="field">
                                    <label>Address</label>
                                    <textarea id="stf_address" name="stf_address" placeholder="Enter full address"></textarea>
                                </div>
                                <div class="field">
                                    <label>Next of Kin (Name, Contact, Relation - separated by commas)</label>
                                    <textarea id="stf_nextofkin" name="stf_nextofkin" placeholder="e.g., John Doe, 03XX-XXXXXXX, Brother"></textarea>
                                </div>
                            </div>

                            <div class="form-grid">
                                <div class="field">
                                    <label>Profile Picture</label>
                                    <input type="file" id="stf_picture" name="stf_picture" accept="image/*">
                                </div>
                                <div class="field">
                                    <label>CNIC Copy</label>
                                    <input type="file" id="stf_cnic" name="stf_cnic" accept="image/*,application/pdf">
                                </div>
                            </div>

                            <div style="margin-top: 20px;">
                                <button type="submit" id="submitBtn">Add Staff Member</button>
                                <button type="button" id="cancelEdit" onclick="resetStaffForm()">Reset Form</button>
                            </div>
                        </form>
                    </div>

                    <!-- View All Staff Content -->
                    <div id="view-staff" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-list"></i> View All Staff</h3>
                        <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Filter by Type</label>
                                <select id="staffTypeFilter" onchange="filterStaff()">
                                    <option value="">All</option>
                                    <option value="teaching">Teaching Staff</option>
                                    <option value="non-teaching">Non-Teaching Staff</option>
                                </select>
                            </div>
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Search</label>
                                <input type="text" id="searchStaff" placeholder="Search by name or staff number..." onkeyup="searchStaffTable()">
                            </div>
                        </div>
                        
                        <table id="staffTable">
                            <thead>
                                <tr>
                                    <th>Staff #</th>
                                    <th>Name</th>
                                    <th>Designation</th>
                                    <th>Type</th>
                                    <th>Contact</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="7" style="text-align: center; padding: 20px;">No staff records found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Staff Education Content -->
                    <div id="staff-education" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-graduation-cap"></i> Staff Education Records</h3>
                        <div class="two-column-layout">
                            <div class="form-column">
                                <h4 style="color: #8b0000; margin-bottom: 15px;">Add Education Record</h4>
                                <form id="staffEducationForm" onsubmit="submitEducationForm(event)">
                                    <div class="field">
                                        <label>Select Staff Member *</label>
                                        <select id="sed_stfid" name="sed_stfid" required>
                                            <option value="">--Select Staff--</option>
                                        </select>
                                    </div>
                                    <div class="field">
                                        <label>Degree Name *</label>
                                        <input type="text" id="sed_degreename" name="sed_degreename" required placeholder="e.g., Bachelor of Education">
                                    </div>
                                    <div class="field">
                                        <label>Year of Passing *</label>
                                        <input type="text" id="sed_yearpassing" name="sed_yearpassing" required placeholder="e.g., 2018" maxlength="4">
                                    </div>
                                    <div class="field">
                                        <label>Institute Name *</label>
                                        <input type="text" id="sed_institutename" name="sed_institutename" required placeholder="Enter institute name">
                                    </div>
                                    <div class="field">
                                        <label>Grades/CGPA *</label>
                                        <input type="text" id="sed_grades" name="sed_grades" required placeholder="e.g., A 947/1000 or 3.75/4">
                                    </div>
                                    <div style="margin-top: 15px;">
                                        <button type="submit" id="submitBtn">Add Education Record</button>
                                        <button type="button" id="cancelEdit" onclick="resetEducationForm()">Reset</button>
                                    </div>
                                </form>
                            </div>

                            <div class="table-column">
                                <h4 style="color: #8b0000; margin-bottom: 15px;">Education Records List</h4>
                                <div class="field" style="margin-bottom: 15px;">
                                    <label>Filter by Staff Member</label>
                                    <select id="filterEducationStaff" onchange="filterEducationRecords()">
                                        <option value="">All Staff</option>
                                    </select>
                                </div>
                                <table id="educationTable">
                                    <thead>
                                        <tr>
                                            <th>Staff Name</th>
                                            <th>Degree</th>
                                            <th>Year</th>
                                            <th>Institute</th>
                                            <th>Grades</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="6" style="text-align: center; padding: 20px;">No education records found</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Staff Salary Content -->
                    <div id="staff-salary" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-money-bill-wave"></i> Staff Salary Records</h3>
                        <div style="margin-bottom: 20px;">
                            <div class="form-grid">
                                <div class="field">
                                    <label>Select Month</label>
                                    <input type="month" id="salaryMonth">
                                </div>
                                <div class="field">
                                    <label>Filter by Type</label>
                                    <select id="salaryTypeFilter">
                                        <option value="">All Staff</option>
                                        <option value="teaching">Teaching Staff</option>
                                        <option value="non-teaching">Non-Teaching Staff</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <table id="salaryTable">
                            <thead>
                                <tr>
                                    <th>Staff #</th>
                                    <th>Name</th>
                                    <th>Designation</th>
                                    <th>Monthly Salary</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" style="text-align: center; padding: 20px;">No salary records found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Staff Attendance Content -->
                    <div id="staff-attendance" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-calendar-check"></i> Staff Attendance</h3>
                        <div style="margin-bottom: 20px;">
                            <div class="form-grid">
                                <div class="field">
                                    <label>Select Date</label>
                                    <input type="date" id="attendanceDate" value="">
                                </div>
                                <div class="field">
                                    <label>Filter by Type</label>
                                    <select id="attendanceTypeFilter">
                                        <option value="">All Staff</option>
                                        <option value="teaching">Teaching Staff</option>
                                        <option value="non-teaching">Non-Teaching Staff</option>
                                    </select>
                                </div>
                            </div>
                            <button onclick="markAllPresent()" style="background: #4CAF50; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; margin-right: 10px;">
                                <i class="fas fa-check-circle"></i> Mark All Present
                            </button>
                            <button onclick="saveAttendance()" style="background: #8b0000; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer;">
                                <i class="fas fa-save"></i> Save Attendance
                            </button>
                        </div>

                        <table id="attendanceTable">
                            <thead>
                                <tr>
                                    <th>Staff #</th>
                                    <th>Name</th>
                                    <th>Designation</th>
                                    <th>Present</th>
                                    <th>Absent</th>
                                    <th>Leave</th>
                                    <th>Remarks</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="7" style="text-align: center; padding: 20px;">No staff records found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Teacher Management Dashboard Section -->
            <section id="teacher-management-dashboard" class="workspace-section">
                <h2><i class="fas fa-chalkboard-teacher"></i> Teacher Management</h2>
                <p style="color: #666; margin-bottom: 10px;">Handle teachers, schedules, subject assignments and performance reviews</p>
                <div style="background: #f0f8ff; border-left: 4px solid #2196F3; padding: 12px 15px; margin-bottom: 20px; border-radius: 6px;">
                    <small style="color: #1976D2;"><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Select an option below to view its details. The sidebar menu will update to show your current location.</small>
                </div>
                
                <div class="submenu-dashboard-grid">
                    <div class="submenu-option-card" onclick="showContentInDashboard('teacher-management-dashboard', 'add-teacher', event)">
                        <div class="option-icon" style="background: #8b0000;">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h3>Add New Teacher</h3>
                        <p>Register new teachers with qualifications</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('teacher-management-dashboard', 'view-teachers', event)">
                        <div class="option-icon" style="background: #2196F3;">
                            <i class="fas fa-list"></i>
                        </div>
                        <h3>View All Teachers</h3>
                        <p>Browse and manage all teacher records</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('teacher-management-dashboard', 'teacher-schedule', event)">
                        <div class="option-icon" style="background: #00BCD4;">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h3>Teacher Schedule</h3>
                        <p>Manage weekly teacher schedules and classes</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('teacher-management-dashboard', 'teacher-subjects', event)">
                        <div class="option-icon" style="background: #4CAF50;">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3>Subject Assignment</h3>
                        <p>Assign subjects to teachers for classes</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('teacher-management-dashboard', 'teacher-performance', event)">
                        <div class="option-icon" style="background: #FF5722;">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3>Performance Review</h3>
                        <p>Track teacher performance and feedback</p>
                    </div>
                </div>

                <!-- Content Area for Teacher Management -->
                <div id="teacher-management-content" class="dashboard-content-area">
                    <!-- Add New Teacher Content -->
                    <div id="add-teacher" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-user-plus"></i> Add New Teacher</h3>
                        <form id="addTeacherForm">
                            <div class="form-grid">
                                <div class="field">
                                    <label>Full Name *</label>
                                    <input type="text" required placeholder="Enter teacher's full name">
                                </div>
                                <div class="field">
                                    <label>Teacher ID *</label>
                                    <input type="text" required placeholder="e.g., TCH001">
                                </div>
                                <div class="field">
                                    <label>Gender *</label>
                                    <select required>
                                        <option value="">--Select--</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Date of Birth *</label>
                                    <input type="date" required>
                                </div>
                                <div class="field">
                                    <label>Qualification *</label>
                                    <input type="text" required placeholder="e.g., Master's in Mathematics">
                                </div>
                                <div class="field">
                                    <label>Specialization</label>
                                    <input type="text" placeholder="e.g., Mathematics, Physics">
                                </div>
                                <div class="field">
                                    <label>Contact Number *</label>
                                    <input type="text" required placeholder="03XX-XXXXXXX">
                                </div>
                                <div class="field">
                                    <label>Email *</label>
                                    <input type="email" required placeholder="teacher@school.com">
                                </div>
                                <div class="field">
                                    <label>Joining Date *</label>
                                    <input type="date" required>
                                </div>
                                <div class="field">
                                    <label>Experience (Years)</label>
                                    <input type="number" placeholder="Years of experience">
                                </div>
                                <div class="field">
                                    <label>Monthly Salary *</label>
                                    <input type="number" required placeholder="50000">
                                </div>
                                <div class="field">
                                    <label>Emergency Contact</label>
                                    <input type="text" placeholder="Emergency contact number">
                                </div>
                            </div>
                            <div class="field">
                                <label>Address</label>
                                <textarea placeholder="Enter complete address" rows="3"></textarea>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn">Add Teacher</button>
                                <button type="reset" class="reset-btn">Reset Form</button>
                            </div>
                        </form>
                    </div>

                    <!-- View All Teachers Content -->
                    <div id="view-teachers" class="dashboard-content-item">
                        <h3 style="color: #2196F3; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-list"></i> All Teachers</h3>
                        <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Search Teacher</label>
                                <input type="text" placeholder="Search by name, ID, or subject...">
                            </div>
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Filter by Subject</label>
                                <select>
                                    <option value="">All Subjects</option>
                                    <option value="mathematics">Mathematics</option>
                                    <option value="science">Science</option>
                                    <option value="english">English</option>
                                    <option value="urdu">Urdu</option>
                                </select>
                            </div>
                        </div>
                        <div style="overflow-x: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Qualification</th>
                                        <th>Specialization</th>
                                        <th>Contact</th>
                                        <th>Experience</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>TCH001</td>
                                        <td>Mr. Ahmed Khan</td>
                                        <td>M.Sc Mathematics</td>
                                        <td>Mathematics</td>
                                        <td>0321-1234567</td>
                                        <td>5 years</td>
                                        <td>
                                            <button class="action-btn">Edit</button>
                                            <button class="action-btn danger">Delete</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>TCH002</td>
                                        <td>Ms. Fatima Ali</td>
                                        <td>M.A English</td>
                                        <td>English Literature</td>
                                        <td>0322-9876543</td>
                                        <td>3 years</td>
                                        <td>
                                            <button class="action-btn">Edit</button>
                                            <button class="action-btn danger">Delete</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Teacher Schedule Content -->
                    <div id="teacher-schedule" class="dashboard-content-item">
                        <h3 style="color: #00BCD4; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-calendar-alt"></i> Teacher Schedule</h3>
                        <div class="field">
                            <label>Select Teacher</label>
                            <select>
                                <option value="">--Select Teacher--</option>
                                <option value="tch001">Mr. Ahmed Khan</option>
                                <option value="tch002">Ms. Fatima Ali</option>
                            </select>
                        </div>
                        <div style="overflow-x: auto; margin-top: 20px;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>Monday</th>
                                        <th>Tuesday</th>
                                        <th>Wednesday</th>
                                        <th>Thursday</th>
                                        <th>Friday</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>8:00 - 9:00</td>
                                        <td>Math - 9th A</td>
                                        <td>Math - 9th B</td>
                                        <td>Math - 10th A</td>
                                        <td>Math - 9th A</td>
                                        <td>Free</td>
                                    </tr>
                                    <tr>
                                        <td>9:00 - 10:00</td>
                                        <td>Math - 10th B</td>
                                        <td>Free</td>
                                        <td>Math - 9th B</td>
                                        <td>Math - 10th A</td>
                                        <td>Math - 10th B</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Teacher Subjects Content -->
                    <div id="teacher-subjects" class="dashboard-content-item">
                        <h3 style="color: #4CAF50; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-book"></i> Subject Assignment</h3>
                        <form>
                            <div class="form-grid">
                                <div class="field">
                                    <label>Select Teacher *</label>
                                    <select required>
                                        <option value="">--Select Teacher--</option>
                                        <option value="tch001">Mr. Ahmed Khan</option>
                                        <option value="tch002">Ms. Fatima Ali</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Select Class *</label>
                                    <select required>
                                        <option value="">--Select Class--</option>
                                        <option value="9">Class 9</option>
                                        <option value="10">Class 10</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Select Section *</label>
                                    <select required>
                                        <option value="">--Select Section--</option>
                                        <option value="A">Section A</option>
                                        <option value="B">Section B</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Select Subject *</label>
                                    <select required>
                                        <option value="">--Select Subject--</option>
                                        <option value="math">Mathematics</option>
                                        <option value="english">English</option>
                                        <option value="science">Science</option>
                                    </select>
                                </div>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn">Assign Subject</button>
                                <button type="reset" class="reset-btn">Reset</button>
                            </div>
                        </form>
                        <div style="margin-top: 30px;">
                            <h4>Current Assignments</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Teacher</th>
                                        <th>Class</th>
                                        <th>Section</th>
                                        <th>Subject</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Mr. Ahmed Khan</td>
                                        <td>9</td>
                                        <td>A</td>
                                        <td>Mathematics</td>
                                        <td><button class="action-btn danger">Remove</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Teacher Performance Content -->
                    <div id="teacher-performance" class="dashboard-content-item">
                        <h3 style="color: #FF5722; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-chart-line"></i> Performance Review</h3>
                        <div class="field">
                            <label>Select Teacher</label>
                            <select>
                                <option value="">--Select Teacher--</option>
                                <option value="tch001">Mr. Ahmed Khan</option>
                                <option value="tch002">Ms. Fatima Ali</option>
                            </select>
                        </div>
                        <div style="margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 8px;">
                            <h4 style="margin-bottom: 15px;">Performance Summary</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div style="background: white; padding: 15px; border-radius: 6px;">
                                    <p style="color: #666; font-size: 14px;">Student Rating</p>
                                    <p style="font-size: 24px; font-weight: bold; color: #4CAF50;">4.5/5.0</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 6px;">
                                    <p style="color: #666; font-size: 14px;">Classes Taught</p>
                                    <p style="font-size: 24px; font-weight: bold; color: #2196F3;">24</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 6px;">
                                    <p style="color: #666; font-size: 14px;">Attendance Rate</p>
                                    <p style="font-size: 24px; font-weight: bold; color: #FF9800;">95%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Classes Management Dashboard Section -->
            <section id="classes-management-dashboard" class="workspace-section">
                <h2><i class="fas fa-school"></i> Classes Management</h2>
                <p style="color: #666; margin-bottom: 10px;">Organize classes, sections, timetables and subject configurations</p>
                <div style="background: #f0f8ff; border-left: 4px solid #2196F3; padding: 12px 15px; margin-bottom: 20px; border-radius: 6px;">
                    <small style="color: #1976D2;"><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Select an option below to view its details. The sidebar menu will update to show your current location.</small>
                </div>
                
                <div class="submenu-dashboard-grid">
                    <div class="submenu-option-card" onclick="showContentInDashboard('classes-management-dashboard', 'add-class', event)">
                        <div class="option-icon" style="background: #8b0000;">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <h3>Add New Class</h3>
                        <p>Create new classes with details</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('classes-management-dashboard', 'view-classes', event)">
                        <div class="option-icon" style="background: #2196F3;">
                            <i class="fas fa-list"></i>
                        </div>
                        <h3>View All Classes</h3>
                        <p>Browse and manage all class records</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('classes-management-dashboard', 'classes-mgmt-sections', event)">
                        <div class="option-icon" style="background: #673AB7;">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <h3>Manage Sections</h3>
                        <p>Create and organize class sections</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('classes-management-dashboard', 'class-timetable', event)">
                        <div class="option-icon" style="background: #FF5722;">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3>Class Timetable</h3>
                        <p>Set up weekly timetables for classes</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('classes-management-dashboard', 'class-subjects', event)">
                        <div class="option-icon" style="background: #009688;">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <h3>Subject Configuration</h3>
                        <p>Configure subjects with marks and details</p>
                    </div>
                </div>

                <!-- Content Area for Classes Management -->
                <div id="classes-management-content" class="dashboard-content-area">
                    <!-- Add New Class Content -->
                    <div id="add-class" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-plus-circle"></i> Add New Class</h3>
                        <form id="addClassForm">
                            <div class="form-grid">
                                <div class="field">
                                    <label>Class Name *</label>
                                    <input type="text" required placeholder="e.g., Class 9">
                                </div>
                                <div class="field">
                                    <label>Class Code *</label>
                                    <input type="text" required placeholder="e.g., CLS9">
                                </div>
                                <div class="field">
                                    <label>Academic Year *</label>
                                    <input type="text" required placeholder="e.g., 2024-2025">
                                </div>
                                <div class="field">
                                    <label>Maximum Students *</label>
                                    <input type="number" required placeholder="e.g., 40">
                                </div>
                                <div class="field">
                                    <label>Class Teacher</label>
                                    <select>
                                        <option value="">--Select Teacher--</option>
                                        <option value="tch001">Mr. Ahmed Khan</option>
                                        <option value="tch002">Ms. Fatima Ali</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Classroom Number</label>
                                    <input type="text" placeholder="e.g., Room 101">
                                </div>
                            </div>
                            <div class="field">
                                <label>Description</label>
                                <textarea placeholder="Add class description (optional)" rows="3"></textarea>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn">Add Class</button>
                                <button type="reset" class="reset-btn">Reset Form</button>
                            </div>
                        </form>
                    </div>

                    <!-- View All Classes Content -->
                    <div id="view-classes" class="dashboard-content-item">
                        <h3 style="color: #2196F3; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-list"></i> All Classes</h3>
                        <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Search Class</label>
                                <input type="text" placeholder="Search by name or code...">
                            </div>
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Filter by Year</label>
                                <select>
                                    <option value="">All Years</option>
                                    <option value="2024">2024-2025</option>
                                    <option value="2023">2023-2024</option>
                                </select>
                            </div>
                        </div>
                        <div style="overflow-x: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Class Name</th>
                                        <th>Academic Year</th>
                                        <th>Students</th>
                                        <th>Class Teacher</th>
                                        <th>Room</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>CLS9</td>
                                        <td>Class 9</td>
                                        <td>2024-2025</td>
                                        <td>35/40</td>
                                        <td>Mr. Ahmed Khan</td>
                                        <td>Room 101</td>
                                        <td>
                                            <button class="action-btn">Edit</button>
                                            <button class="action-btn danger">Delete</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>CLS10</td>
                                        <td>Class 10</td>
                                        <td>2024-2025</td>
                                        <td>38/40</td>
                                        <td>Ms. Fatima Ali</td>
                                        <td>Room 102</td>
                                        <td>
                                            <button class="action-btn">Edit</button>
                                            <button class="action-btn danger">Delete</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Manage Sections Content -->
                    <div id="classes-mgmt-sections" class="dashboard-content-item">
                        <h3 style="color: #673AB7; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-layer-group"></i> Manage Sections</h3>
                        <form>
                            <div class="form-grid">
                                <div class="field">
                                    <label>Select Class *</label>
                                    <select required>
                                        <option value="">--Select Class--</option>
                                        <option value="9">Class 9</option>
                                        <option value="10">Class 10</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Section Name *</label>
                                    <input type="text" required placeholder="e.g., Section A">
                                </div>
                                <div class="field">
                                    <label>Maximum Students *</label>
                                    <input type="number" required placeholder="e.g., 35">
                                </div>
                                <div class="field">
                                    <label>Section Incharge</label>
                                    <select>
                                        <option value="">--Select Teacher--</option>
                                        <option value="tch001">Mr. Ahmed Khan</option>
                                        <option value="tch002">Ms. Fatima Ali</option>
                                    </select>
                                </div>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn">Add Section</button>
                                <button type="reset" class="reset-btn">Reset</button>
                            </div>
                        </form>
                        <div style="margin-top: 30px;">
                            <h4>Existing Sections</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Class</th>
                                        <th>Section</th>
                                        <th>Students</th>
                                        <th>Section Incharge</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Class 9</td>
                                        <td>Section A</td>
                                        <td>35/40</td>
                                        <td>Mr. Ahmed Khan</td>
                                        <td><button class="action-btn danger">Remove</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Class Timetable Content -->
                    <div id="class-timetable" class="dashboard-content-item">
                        <h3 style="color: #FF5722; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-clock"></i> Class Timetable</h3>
                        <div class="form-grid">
                            <div class="field">
                                <label>Select Class</label>
                                <select>
                                    <option value="">--Select Class--</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Select Section</label>
                                <select>
                                    <option value="">--Select Section--</option>
                                    <option value="A">Section A</option>
                                    <option value="B">Section B</option>
                                </select>
                            </div>
                        </div>
                        <div style="overflow-x: auto; margin-top: 20px;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>Monday</th>
                                        <th>Tuesday</th>
                                        <th>Wednesday</th>
                                        <th>Thursday</th>
                                        <th>Friday</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>8:00 - 9:00</td>
                                        <td>Mathematics</td>
                                        <td>English</td>
                                        <td>Science</td>
                                        <td>Mathematics</td>
                                        <td>Urdu</td>
                                    </tr>
                                    <tr>
                                        <td>9:00 - 10:00</td>
                                        <td>English</td>
                                        <td>Science</td>
                                        <td>Mathematics</td>
                                        <td>English</td>
                                        <td>Computer</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Subject Configuration Content -->
                    <div id="class-subjects" class="dashboard-content-item">
                        <h3 style="color: #009688; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-book-open"></i> Subject Configuration</h3>
                        <form>
                            <div class="form-grid">
                                <div class="field">
                                    <label>Subject Name *</label>
                                    <input type="text" required placeholder="e.g., Mathematics">
                                </div>
                                <div class="field">
                                    <label>Subject Code *</label>
                                    <input type="text" required placeholder="e.g., MATH101">
                                </div>
                                <div class="field">
                                    <label>Total Marks *</label>
                                    <input type="number" required placeholder="e.g., 100">
                                </div>
                                <div class="field">
                                    <label>Passing Marks *</label>
                                    <input type="number" required placeholder="e.g., 33">
                                </div>
                                <div class="field">
                                    <label>Credit Hours</label>
                                    <input type="number" placeholder="e.g., 3">
                                </div>
                                <div class="field">
                                    <label>Subject Type</label>
                                    <select>
                                        <option value="">--Select Type--</option>
                                        <option value="core">Core Subject</option>
                                        <option value="elective">Elective</option>
                                    </select>
                                </div>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn">Add Subject</button>
                                <button type="reset" class="reset-btn">Reset</button>
                            </div>
                        </form>
                        <div style="margin-top: 30px;">
                            <h4>Configured Subjects</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Subject</th>
                                        <th>Total Marks</th>
                                        <th>Passing Marks</th>
                                        <th>Type</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>MATH101</td>
                                        <td>Mathematics</td>
                                        <td>100</td>
                                        <td>33</td>
                                        <td>Core</td>
                                        <td>
                                            <button class="action-btn">Edit</button>
                                            <button class="action-btn danger">Delete</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Fee Management Dashboard Section -->
            <section id="fee-management-dashboard" class="workspace-section">
                <h2><i class="fas fa-dollar-sign"></i> Fee Management</h2>
                <p style="color: #666; margin-bottom: 10px;">Setup fees, generate challans and manage payment records</p>
                <div style="background: #f0f8ff; border-left: 4px solid #2196F3; padding: 12px 15px; margin-bottom: 20px; border-radius: 6px;">
                    <small style="color: #1976D2;"><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Select an option below to view its details. The sidebar menu will update to show your current location.</small>
                </div>
                
                <div class="submenu-dashboard-grid">
                    <div class="submenu-option-card" onclick="showContentInDashboard('fee-management-dashboard', 'fee-charges', event)">
                        <div class="option-icon" style="background: #4CAF50;">
                            <i class="fas fa-cog"></i>
                        </div>
                        <h3>Fee Head Setup</h3>
                        <p>Configure fee head Structure</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('fee-management-dashboard', 'fee-setup', event)">
                        <div class="option-icon" style="background: #009688;">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <h3>Fee & Charges Setup</h3>
                        <p>Manage fee heads amount</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('fee-management-dashboard', 'challan-form', event)">
                        <div class="option-icon" style="background: #607D8B;">
                            <i class="fas fa-receipt"></i>
                        </div>
                        <h3>Challan Form</h3>
                        <p>Generate fee challan forms for students</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('fee-management-dashboard', 'generated-forms', event)">
                        <div class="option-icon" style="background: #795548;">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h3>Generated Forms</h3>
                        <p>View and manage generated challans</p>
                    </div>
                </div>

                <!-- Content Area for Fee Management -->
                <div id="fee-management-content" class="dashboard-content-area">
                    <!-- Fee Setup Content -->
                    <div id="fee-setup" class="dashboard-content-item">
                        <h3 style="color: #4CAF50; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-cog"></i> Fee & Charges Setup</h3>
                        <div style="display:flex; gap: 20px;">
                            <div style="width:35%">
                                <form method="post" id="feeForm">
                                    <input type="hidden" name="editId" id="editId" />
                                    <div class="field">
                                        <label>Select Category</label>
                                        <select name="Category" id="category" required>
                                            <option value="">--Select--</option>
                                            <option value="Admission Charges">Admission Charges</option>
                                            <option value="Class Fee Charges">Class Fee Charges</option>
                                            <option value="Others">Others</option>
                                        </select>
                                    </div>
                                    <div class="field" id="classField" style="display:none">
                                        <label>Select Class</label>
                                        <select name="classID" id="classID">
                                            <option value="">--Select--</option>
                                            <option value="9">Class 9</option>
                                            <option value="10">Class 10</option>
                                        </select>
                                    </div>
                                    <div class="field">
                                        <label>Select Feehead</label>
                                        <select name="feeHead" id="feeHead" required>
                                            <option value="">--Select--</option>
                                            <option value="Tuition Fee">Tuition Fee</option>
                                            <option value="Exam Fee">Exam Fee</option>
                                            <option value="Library Fee">Library Fee</option>
                                        </select>
                                    </div>
                                    <div class="field">
                                        <label>Enter Fee Amount</label>
                                        <input name="amount" type="number" id="amount" placeholder="5000.." min="0" required />
                                    </div>
                                    <div>
                                        <button type="submit" id="submitBtn" class="submit-btn">Set Fee</button>
                                        <button type="button" id="cancelEdit" class="reset-btn" style="display:none;" onclick="resetForm()">Cancel</button>
                                    </div>
                                </form>
                            </div>
                            <div style="width:65%;">
                                <div class="field">
                                    <label>Select Category</label>
                                    <select id="tablecategory">
                                        <option value="">--Select--</option>
                                        <option value="Admission Charges">Admission Charges</option>
                                        <option value="Class Fee Charges">Class Fee Charges</option>
                                        <option value="Others">Others</option>
                                    </select>
                                </div>
                                <div class="field" id="tableclassField" style="display:none">
                                    <label>Select Class</label>
                                    <select id="tableclassID">
                                        <option value="">--Select--</option>
                                        <option value="9">Class 9</option>
                                        <option value="10">Class 10</option>
                                    </select>
                                </div>
                                <table id="feeTable" style="margin-top: 15px;">
                                    <thead>
                                        <tr>
                                            <th>Fee Head</th>
                                            <th>Amount</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody style="text-align:center">
                                        <tr>
                                            <td colspan="3" style="text-align: center;">Please select a category</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Fee Charges Content -->
                    <div id="fee-charges" class="dashboard-content-item">
                        <h3 style="color: #009688; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-file-invoice-dollar"></i> Fee & Charges</h3>
                        <div style="display:flex; gap: 20px;">
                            <div style="width:35%">
                                <form id="feeChargesForm">
                                    <input type="hidden" id="feeEditId" />
                                    <div class="field">
                                        <label>Fee Category *</label>
                                        <select id="feeCategory" required>
                                            <option value="">--Select--</option>
                                            <option value="Admission Charges">Admission Charges</option>
                                            <option value="Class Fee Charges">Class Fee Charges</option>
                                            <option value="Others">Others</option>
                                        </select>
                                    </div>
                                    <div class="field">
                                        <label>Fee Head Name *</label>
                                        <input type="text" id="feeHeadName" required placeholder="e.g., Tuition Fee">
                                    </div>
                                    <div>
                                        <button type="submit" class="submit-btn">Add Fee Head</button>
                                        <button type="reset" class="reset-btn">Reset</button>
                                    </div>
                                </form>
                            </div>
                            <div style="width:65%;">
                                <div class="field">
                                    <label>Select Category</label>
                                    <select id="tablecategory">
                                        <option value="">--Select--</option>
                                        <option value="Admission Charges">Admission Charges</option>
                                        <option value="Class Fee Charges">Class Fee Charges</option>
                                        <option value="Others">Others</option>
                                    </select>
                                </div>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Fee Head</th>
                                            <th>Category</th>
                                            <th>Description</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="challan-form" class="dashboard-content-item">
    <h3 style="color: #607D8B; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;">
        <i class="fas fa-receipt"></i> Generate Challan Form
    </h3>

    <!-- 🔍 Search Section -->
    <div class="form-grid">
        <div class="field">
            <label>Search By *</label>
            <select id="searchType" required>
                <option value="">---Select---</option>
                <option value="applicantId">Applicant ID</option>
                <option value="bForm">B-Form Number</option>
                <option value="studentId">Student ID</option>
            </select>
        </div>

        <div class="field">
            <label id="searchLabel">Enter Value *</label>
            <input type="text" id="searchValue" placeholder="Enter Applicant ID / B-Form / Student ID" disabled>
        </div>

        <div class="field" style="align-self: end;">
            <button type="button" id="searchBtn" class="submit-btn">Search</button>
        </div>
    </div>

    <!-- 👤 Student Info Table -->
    <div style="margin-top: 20px;">
        <table id="studentTable">
            <thead>
                <tr>
                    <th>App ID</th>
                    <th>Name</th>
                    <th>B-Form Number</th>
                    <th>DOB</th>
                    <th>Father Name</th>
                    <th>Father Contact</th>
                </tr>
            </thead>
            <tbody>
                <!-- Dynamically filled -->
            </tbody>
        </table>
    </div>

    <!-- 🧾 Challan Details Section -->
    <form id="challanGenerateForm" style="margin-top: 30px;">
        <div style="display: flex; gap: 20px;">
            
            <!-- 🔹 LEFT SIDE: Challan Info -->
            <div style="flex: 1; background: #fafafa; padding: 20px; border-radius: 8px; border: 1px solid #ddd;">
                <h4 style="margin-bottom: 15px;">Challan Information</h4>

                <div class="field">
                    <label>Challan Type *</label>
                    <select id="challanType" required>
                        <option value="">--Select Type--</option>
                    </select>
                </div><br>

                <div class="field">
                    <label>No. of Days Before Fine *</label>
                    <input type="number" id="daysBeforeFine" min="0" placeholder="e.g. 10" required>
                </div><br>

                <div class="field">
                    <label>Fine Amount (PKR) *</label>
                    <input type="number" id="fineAmount" min="0" placeholder="e.g. 200" required>
                </div>
            </div>

            <!-- 🔹 RIGHT SIDE: Fee Heads -->
            <div style="flex: 1; background: #fafafa; padding: 20px; border-radius: 8px; border: 1px solid #ddd;">
                <h4 style="margin-bottom: 10px;">Fee Details</h4>

                <!-- File upload for discount -->
                <div class="field">
                    <label>Upload Discount Document (if any)</label>
                    <input type="file" id="discountFile" accept=".jpg,.png,.pdf">
                </div>

                <table style="margin-top: 15px; width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>Fee Head</th>
                            <th>Amount</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="feeTableBody">
                        <tr>
                            <td>Tuition Fee</td>
                            <td><input type="number" value="5000" disabled></td>
                            <td><button type="button" class="edit-btn" disabled>Edit</button></td>
                        </tr>
                        <tr>
                            <td>Exam Fee</td>
                            <td><input type="number" value="1000" disabled></td>
                            <td><button type="button" class="edit-btn" disabled>Edit</button></td>
                        </tr>
                        <tr>
                            <td>Library Fee</td>
                            <td><input type="number" value="500" disabled></td>
                            <td><button type="button" class="edit-btn" disabled>Edit</button></td>
                        </tr>
                    </tbody>
                </table>

                <div style="margin-top: 15px; text-align: right;">
                    <strong>Total Amount: PKR <span id="totalAmount">6,500</span></strong>
                </div>
            </div>
        </div>

        <!-- Buttons -->
        <div style="margin-top: 20px; text-align: center;">
            <button type="submit" class="submit-btn">Generate Challan</button>
            <button type="reset" class="reset-btn">Reset</button>
        </div>
    </form>
</div>

                    <!-- Generated Forms Content -->
                    <div id="generated-forms" class="dashboard-content-item">
                        <h3 style="color: #795548; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-file-alt"></i> Generated Forms</h3>
                        <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Search by Student</label>
                                <input type="text" placeholder="Search by name or ID...">
                            </div>
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Filter by Month</label>
                                <select>
                                    <option value="">All Months</option>
                                    <option value="January">January</option>
                                    <option value="February">February</option>
                                    <option value="March">March</option>
                                </select>
                            </div>
                            <div class="field" style="flex: 1; margin-bottom: 0;">
                                <label>Filter by Status</label>
                                <select>
                                    <option value="">All Status</option>
                                    <option value="Paid">Paid</option>
                                    <option value="Pending">Pending</option>
                                    <option value="Overdue">Overdue</option>
                                </select>
                            </div>
                        </div>
                        <div style="overflow-x: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Challan No.</th>
                                        <th>Student Name</th>
                                        <th>Class</th>
                                        <th>Month</th>
                                        <th>Amount</th>
                                        <th>Due Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>CH-2024-001</td>
                                        <td>Ali Ahmed</td>
                                        <td>Class 9</td>
                                        <td>January</td>
                                        <td>PKR 6,000</td>
                                        <td>2024-01-31</td>
                                        <td><span style="color: green; font-weight: bold;">Paid</span></td>
                                        <td>
                                            <button class="action-btn">View</button>
                                            <button class="action-btn">Print</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>CH-2024-002</td>
                                        <td>Sara Khan</td>
                                        <td>Class 10</td>
                                        <td>January</td>
                                        <td>PKR 6,500</td>
                                        <td>2024-01-31</td>
                                        <td><span style="color: orange; font-weight: bold;">Pending</span></td>
                                        <td>
                                            <button class="action-btn">View</button>
                                            <button class="action-btn">Print</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- School Setup Dashboard Section -->
            <section id="school-setup-dashboard" class="workspace-section">
                <h2><i class="fas fa-cogs"></i> School Setup</h2>
                <p style="color: #666; margin-bottom: 10px;">Configure school information, bank details, classes and sections</p>
                <div style="background: #f0f8ff; border-left: 4px solid #2196F3; padding: 12px 15px; margin-bottom: 20px; border-radius: 6px;">
                    <small style="color: #1976D2;"><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Select an option below to view its details. The sidebar menu will update to show your current location.</small>
                </div>
                
                <div class="submenu-dashboard-grid">
                    <div class="submenu-option-card" onclick="showContentInDashboard('school-setup-dashboard', 'school-info', event)">
                        <div class="option-icon" style="background: #3F51B5;">
                            <i class="fas fa-building"></i>
                        </div>
                        <h3>School Information</h3>
                        <p>Manage basic school information and contact details</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('school-setup-dashboard', 'bank-details', event)">
                        <div class="option-icon" style="background: #009688;">
                            <i class="fas fa-university"></i>
                        </div>
                        <h3>Bank Details</h3>
                        <p>Configure bank accounts for fee collection</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('school-setup-dashboard', 'classes-config', event)">
                        <div class="option-icon" style="background: #FF5722;">
                            <i class="fas fa-chalkboard"></i>
                        </div>
                        <h3>Classes Configuration</h3>
                        <p>Setup and manage school classes</p>
                    </div>

                    <div class="submenu-option-card" onclick="showContentInDashboard('school-setup-dashboard', 'class-sections', event)">
                        <div class="option-icon" style="background: #9C27B0;">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <h3>Class Sections</h3>
                        <p>Manage sections for each class</p>
                    </div>
                </div>

                <!-- Content Area for School Setup -->
                <div id="school-setup-content" class="dashboard-content-area">
                    <!-- School Information Content -->
                    <div id="school-info" class="dashboard-content-item">
                        <h3 style="color: #3F51B5; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-building"></i> School Information</h3>
                        <form id="schoolInfoForm" onsubmit="submitSchoolInfo(event)">
                            <div class="form-grid">
                                <div class="field">
                                    <label>School Name *</label>
                                    <input type="text" id="sch_name" name="sch_name" required placeholder="Enter school name">
                                </div>
                                <div class="field">
                                    <label>City *</label>
                                    <input type="text" id="sch_city" name="sch_city" required placeholder="Enter city">
                                </div>
                                <div class="field" style="grid-column: 1 / -1;">
                                    <label>School Address *</label>
                                    <textarea id="sch_address" name="sch_address" rows="3" required placeholder="Enter complete address"></textarea>
                                </div>
                                <div class="field">
                                    <label>Phone Number *</label>
                                    <input type="text" id="sch_phonenumber" name="sch_phonenumber" required placeholder="e.g., (051) 4526252">
                                    <small>Format: (Area Code) Number. Use comma for multiple numbers</small>
                                </div>
                                <div class="field">
                                    <label>Mobile Number</label>
                                    <input type="text" id="sch_mobile" name="sch_mobile" placeholder="Comma-separated mobile numbers">
                                </div>
                                <div class="field">
                                    <label>Principal Name</label>
                                    <input type="text" id="sch_principalname" name="sch_principalname" placeholder="Enter principal name">
                                </div>
                                <div class="field">
                                    <label>Principal Mobile</label>
                                    <input type="text" id="sch_principlemobilenumber" name="sch_principlemobilenumber" placeholder="Comma-separated mobile numbers">
                                </div>
                                <div class="field">
                                    <label>Vice Principal Name</label>
                                    <input type="text" id="sch_voiceprincipalname" name="sch_voiceprincipalname" placeholder="Enter vice principal name">
                                </div>
                                <div class="field">
                                    <label>Vice Principal Mobile</label>
                                    <input type="text" id="sch_voiceprincipalmobile" name="sch_voiceprincipalmobile" placeholder="Comma-separated mobile numbers">
                                </div>
                                <div class="field">
                                    <label>Other Contact Name</label>
                                    <input type="text" id="sch_othercontactname" name="sch_othercontactname" placeholder="Enter contact person name">
                                </div>
                                <div class="field">
                                    <label>Other Contact Mobile</label>
                                    <input type="text" id="sch_othercontactmobile" name="sch_othercontactmobile" placeholder="Comma-separated mobile numbers">
                                </div>
                                <div class="field">
                                    <label>Website</label>
                                    <input type="url" id="sch_website" name="sch_website" placeholder="https://example.com">
                                </div>
                                <div class="field">
                                    <label>Instagram ID</label>
                                    <input type="text" id="sch_instaid" name="sch_instaid" placeholder="Enter Instagram username">
                                </div>
                                <div class="field">
                                    <label>Facebook ID</label>
                                    <input type="text" id="sch_fbid" name="sch_fbid" placeholder="Enter Facebook page ID">
                                </div>
                                <div class="field">
                                    <label>LinkedIn ID</label>
                                    <input type="text" id="sch_linkedinid" name="sch_linkedinid" placeholder="Enter LinkedIn profile">
                                </div>
                                <div class="field">
                                    <label>Twitter ID</label>
                                    <input type="text" id="sch_twitterid" name="sch_twitterid" placeholder="Enter Twitter handle">
                                </div>
                                <div class="field">
                                    <label style="display: flex; align-items: center;">
                                        <input type="checkbox" id="sch_governmentapproved" name="sch_governmentapproved" style="width: auto; margin-right: 10px;">
                                        Government Approved
                                    </label>
                                </div>
                                <div class="field">
                                    <label style="display: flex; align-items: center;">
                                        <input type="checkbox" id="sch_governmentschool" name="sch_governmentschool" style="width: auto; margin-right: 10px;">
                                        Government School
                                    </label>
                                </div>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn"><i class="fas fa-save"></i> Save School Information</button>
                                <button type="reset" class="reset-btn"><i class="fas fa-undo"></i> Reset</button>
                            </div>
                        </form>
                    </div>

                    <!-- Bank Details Content -->
                    <div id="bank-details" class="dashboard-content-item">
                        <h3 style="color: #009688; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-university"></i> Bank Details</h3>
                        <form id="bankDetailsForm" onsubmit="submitBankDetails(event)">
                            <input type="hidden" id="bnk_id" name="bnk_id">
                            <div class="form-grid">
                                <div class="field">
                                    <label>Account Title *</label>
                                    <input type="text" id="bnk_accounttitle" name="bnk_accounttitle" required placeholder="Enter account title">
                                </div>
                                <div class="field">
                                    <label>Account Number *</label>
                                    <input type="text" id="bnk_accountnumber" name="bnk_accountnumber" required placeholder="Enter account number">
                                </div>
                                <div class="field">
                                    <label>IBAN Number</label>
                                    <input type="text" id="bnk_ibannumber" name="bnk_ibannumber" placeholder="Enter IBAN number">
                                </div>
                                <div class="field">
                                    <label style="display: flex; align-items: center;">
                                        <input type="checkbox" id="bnk_active" name="bnk_active" checked style="width: auto; margin-right: 10px;">
                                        Active
                                    </label>
                                </div>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn"><i class="fas fa-save"></i> Save Bank Details</button>
                                <button type="reset" class="reset-btn"><i class="fas fa-undo"></i> Reset</button>
                            </div>
                        </form>
                        
                        <!-- View Bank Accounts -->
                        <div style="margin-top: 40px;">
                            <h3 style="color: #009688; margin-bottom: 20px;"><i class="fas fa-list"></i> Bank Accounts</h3>
                            <div style="overflow-x: auto;">
                                <table id="bankAccountsTable">
                                    <thead>
                                        <tr>
                                            <th>Account Title</th>
                                            <th>Account Number</th>
                                            <th>IBAN</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="5" style="text-align: center; padding: 20px;">No bank accounts found</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Classes Configuration Content -->
                    <div id="classes-config" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-plus-circle"></i> Add New Class</h3>
                        <form id="classesConfigForm" onsubmit="submitClassConfig(event)">
                            <input type="hidden" id="cls_id" name="cls_id">
                            <div class="form-grid">
                                <div class="field">
                                    <label>Class Name *</label>
                                    <input type="text" id="cls_name" name="cls_name" required placeholder="e.g., Class 9">
                                </div>
                                <div class="field">
                                    <label>Class Code *</label>
                                    <input type="text" id="cls_prefix" name="cls_prefix" required maxlength="10" placeholder="e.g., CLS9" style="text-transform: uppercase;">
                                </div>
                                <div class="field">
                                    <label>Academic Year *</label>
                                    <input type="text" id="cls_academicyear" name="cls_academicyear" required placeholder="e.g., 2024-2025">
                                </div>
                                <div class="field">
                                    <label>Maximum Students *</label>
                                    <input type="number" id="cls_maxstudents" name="cls_maxstudents" required min="1" placeholder="e.g., 40">
                                </div>
                                <div class="field">
                                    <label>Class Teacher</label>
                                    <select id="cls_teacherid" name="cls_teacherid">
                                        <option value="">--Select Teacher--</option>
                                        <!-- Will be populated dynamically from teachers table -->
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Classroom Number</label>
                                    <input type="text" id="cls_roomnumber" name="cls_roomnumber" placeholder="e.g., Room 101">
                                </div>
                                <div class="field" style="grid-column: 1 / -1;">
                                    <label>Description</label>
                                    <textarea id="cls_description" name="cls_description" rows="3" placeholder="Add class description (optional)"></textarea>
                                </div>
                                <div class="field">
                                    <label style="display: flex; align-items: center;">
                                        <input type="checkbox" id="cls_subjectwiseteaching" name="cls_subjectwiseteaching" style="width: auto; margin-right: 10px;">
                                        Subject-wise Teaching
                                    </label>
                                    <small>Check if subjects are taught by different teachers</small>
                                </div>
                                <div class="field">
                                    <label style="display: flex; align-items: center;">
                                        <input type="checkbox" id="cls_active" name="cls_active" checked style="width: auto; margin-right: 10px;">
                                        Active
                                    </label>
                                </div>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn"><i class="fas fa-save"></i> Add Class</button>
                                <button type="reset" class="reset-btn" onclick="resetClassConfigForm()"><i class="fas fa-undo"></i> Reset Form</button>
                            </div>
                        </form>
                        
                        <!-- View Classes -->
                        <div style="margin-top: 40px;">
                            <h3 style="color: #FF5722; margin-bottom: 20px;"><i class="fas fa-list"></i> All Classes</h3>
                            <div style="margin-bottom: 20px;">
                                <div class="field" style="max-width: 400px;">
                                    <label>Search</label>
                                    <input type="text" id="searchClasses" placeholder="Search by class name or code..." onkeyup="searchClassesTable()">
                                </div>
                            </div>
                            <div style="overflow-x: auto;">
                                <table id="classesConfigTable">
                                    <thead>
                                        <tr>
                                            <th>Class Name</th>
                                            <th>Class Code</th>
                                            <th>Academic Year</th>
                                            <th>Max Students</th>
                                            <th>Class Teacher</th>
                                            <th>Classroom</th>
                                            <th>Subject-wise</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="9" style="text-align: center; padding: 20px;">No classes configured</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Class Sections Content -->
                    <div id="class-sections" class="dashboard-content-item">
                        <h3 style="color: #8b0000; margin-bottom: 20px; padding-top: 20px; border-top: 2px solid #eee;"><i class="fas fa-plus-circle"></i> Add New Section</h3>
                        <form id="classSectionsForm" onsubmit="submitClassSection(event)">
                            <input type="hidden" id="cse_id" name="cse_id">
                            <div class="form-grid">
                                <div class="field">
                                    <label>Select Class *</label>
                                    <select id="cse_classid" name="cse_classid" required>
                                        <option value="">-- Select Class --</option>
                                        <!-- Will be populated dynamically -->
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Section Prefix (3 letters) *</label>
                                    <input type="text" id="cse_prefix" name="cse_prefix" required maxlength="3" placeholder="e.g., SEC" style="text-transform: uppercase;">
                                    <small>3-letter unique identifier</small>
                                </div>
                                <div class="field">
                                    <label>Description *</label>
                                    <input type="text" id="cse_description" name="cse_description" required maxlength="100" placeholder="e.g., Section A - Morning Shift">
                                </div>
                                <div class="field">
                                    <label>Year (4 digits) *</label>
                                    <input type="text" id="cse_year" name="cse_year" required maxlength="4" placeholder="e.g., 2025" pattern="\d{4}">
                                    <small>4-digit year for which section is valid</small>
                                </div>
                                <div class="field">
                                    <label>Last Roll Number</label>
                                    <input type="number" id="cse_lastrollnumber" name="cse_lastrollnumber" value="0" min="0" placeholder="0">
                                    <small>Auto-incremented for each new student</small>
                                </div>
                                <div class="field">
                                    <label style="display: flex; align-items: center;">
                                        <input type="checkbox" id="cse_requiresassistant" name="cse_requiresassistant" style="width: auto; margin-right: 10px;">
                                        Requires Assistant
                                    </label>
                                </div>
                                <div class="field">
                                    <label style="display: flex; align-items: center;">
                                        <input type="checkbox" id="cse_active" name="cse_active" checked style="width: auto; margin-right: 10px;">
                                        Active
                                    </label>
                                </div>
                            </div>
                            <div style="margin-top: 20px;">
                                <button type="submit" class="submit-btn"><i class="fas fa-save"></i> Add Section</button>
                                <button type="reset" class="reset-btn" onclick="resetClassSectionForm()"><i class="fas fa-undo"></i> Reset Form</button>
                            </div>
                        </form>
                        
                        <!-- View Sections -->
                        <div style="margin-top: 40px;">
                            <h3 style="color: #9C27B0; margin-bottom: 20px;"><i class="fas fa-list"></i> All Sections</h3>
                            <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                                <div class="field" style="flex: 1; margin-bottom: 0;">
                                    <label>Filter by Class</label>
                                    <select id="filterClassSections" onchange="filterSectionsByClass()">
                                        <option value="">All Classes</option>
                                        <!-- Will be populated dynamically -->
                                    </select>
                                </div>
                                <div class="field" style="flex: 1; margin-bottom: 0;">
                                    <label>Search</label>
                                    <input type="text" id="searchSections" placeholder="Search sections..." onkeyup="searchSectionsTable()">
                                </div>
                            </div>
                            <div style="overflow-x: auto;">
                                <table id="classSectionsTable">
                                    <thead>
                                        <tr>
                                            <th>Class</th>
                                            <th>Prefix</th>
                                            <th>Description</th>
                                            <th>Year</th>
                                            <th>Last Roll Number</th>
                                            <th>Requires Assistant</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="8" style="text-align: center; padding: 20px;">No sections found</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- View All Staff Section -->
            <section id="view-staff" class="workspace-section">
                <h2>View All Staff</h2>
                <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                    <div class="field" style="flex: 1; margin-bottom: 0;">
                        <label>Filter by Type</label>
                        <select id="staffTypeFilter" onchange="filterStaff()">
                            <option value="">All</option>
                            <option value="teaching">Teaching Staff</option>
                            <option value="non-teaching">Non-Teaching Staff</option>
                        </select>
                    </div>
                    <div class="field" style="flex: 1; margin-bottom: 0;">
                        <label>Search</label>
                        <input type="text" id="searchStaff" placeholder="Search by name or staff number..." onkeyup="searchStaffTable()">
                    </div>
                </div>
                
                <table id="staffTable">
                    <thead>
                        <tr>
                            <th>Staff #</th>
                            <th>Name</th>
                            <th>Designation</th>
                            <th>Type</th>
                            <th>Contact</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 20px;">No staff records found</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Add New Staff Section -->
            <section id="add-staff" class="workspace-section">
                <h2>Add New Staff Member</h2>
                <form id="addStaffForm" onsubmit="submitStaffForm(event)">
                    <div class="form-grid">
                        <div class="field">
                            <label>Full Name *</label>
                            <input type="text" id="stf_name" name="stf_name" required placeholder="Enter full name">
                        </div>
                        <div class="field">
                            <label>Staff Number *</label>
                            <input type="text" id="stf_staffnumber" name="stf_staffnumber" required placeholder="e.g., STF001">
                        </div>
                        <div class="field">
                            <label>Gender *</label>
                            <select id="stf_gender" name="stf_gender" required>
                                <option value="">--Select--</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Date of Birth *</label>
                            <input type="date" id="stf_dob" name="stf_dob" required>
                        </div>
                        <div class="field">
                            <label>Designation *</label>
                            <input type="text" id="stf_designation" name="stf_designation" required placeholder="e.g., Senior Teacher">
                        </div>
                        <div class="field">
                            <label>Joining Date *</label>
                            <input type="date" id="stf_joiningdate" name="stf_joiningdate" required>
                        </div>
                        <div class="field">
                            <label>Contact Number *</label>
                            <input type="text" id="stf_contact" name="stf_contact" required placeholder="03XX-XXXXXXX">
                        </div>
                        <div class="field">
                            <label>Email</label>
                            <input type="email" id="stf_email" name="stf_email" placeholder="email@example.com">
                        </div>
                        <div class="field">
                            <label>Monthly Salary *</label>
                            <input type="number" id="stf_monthlysalary" name="stf_monthlysalary" required placeholder="50000">
                        </div>
                        <div class="field">
                            <label>NTN Number</label>
                            <input type="text" id="stf_ntnnumber" name="stf_ntnnumber" placeholder="Optional">
                        </div>
                        <div class="field">
                            <label>Marital Status</label>
                            <select id="stf_status" name="stf_status">
                                <option value="">--Select--</option>
                                <option value="Married">Married</option>
                                <option value="Unmarried">Unmarried</option>
                                <option value="Widow">Widow</option>
                                <option value="Widower">Widower</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Staff Type *</label>
                            <select id="stf_teacherorstaff" name="stf_teacherorstaff" required>
                                <option value="">--Select--</option>
                                <option value="true">Teaching Staff</option>
                                <option value="false">Non-Teaching Staff</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-grid full-width">
                        <div class="field">
                            <label>Address</label>
                            <textarea id="stf_address" name="stf_address" placeholder="Enter full address"></textarea>
                        </div>
                        <div class="field">
                            <label>Next of Kin (Name, Contact, Relation - separated by commas)</label>
                            <textarea id="stf_nextofkin" name="stf_nextofkin" placeholder="e.g., John Doe, 03XX-XXXXXXX, Brother"></textarea>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="field">
                            <label>Profile Picture</label>
                            <input type="file" id="stf_picture" name="stf_picture" accept="image/*">
                        </div>
                        <div class="field">
                            <label>CNIC Copy</label>
                            <input type="file" id="stf_cnic" name="stf_cnic" accept="image/*,application/pdf">
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <button type="submit" id="submitBtn">Add Staff Member</button>
                        <button type="button" id="cancelEdit" onclick="resetStaffForm()">Reset Form</button>
                    </div>
                </form>
            </section>

            <!-- Staff Education Section -->
            <section id="staff-education" class="workspace-section">
                <h2>Staff Education Records</h2>
                <div class="two-column-layout">
                    <div class="form-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Add Education Record</h3>
                        <form id="staffEducationForm" onsubmit="submitEducationForm(event)">
                            <div class="field">
                                <label>Select Staff Member *</label>
                                <select id="sed_stfid" name="sed_stfid" required>
                                    <option value="">--Select Staff--</option>
                                    <!-- Staff list will be populated dynamically -->
                                </select>
                            </div>
                            <div class="field">
                                <label>Degree Name *</label>
                                <input type="text" id="sed_degreename" name="sed_degreename" required placeholder="e.g., Bachelor of Education">
                            </div>
                            <div class="field">
                                <label>Year of Passing *</label>
                                <input type="text" id="sed_yearpassing" name="sed_yearpassing" required placeholder="e.g., 2018" maxlength="4">
                            </div>
                            <div class="field">
                                <label>Institute Name *</label>
                                <input type="text" id="sed_institutename" name="sed_institutename" required placeholder="Enter institute name">
                            </div>
                            <div class="field">
                                <label>Grades/CGPA *</label>
                                <input type="text" id="sed_grades" name="sed_grades" required placeholder="e.g., A 947/1000 or 3.75/4">
                            </div>
                            <div style="margin-top: 15px;">
                                <button type="submit" id="submitBtn">Add Education Record</button>
                                <button type="button" id="cancelEdit" onclick="resetEducationForm()">Reset</button>
                            </div>
                        </form>
                    </div>

                    <div class="table-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Education Records List</h3>
                        <div class="field" style="margin-bottom: 15px;">
                            <label>Filter by Staff Member</label>
                            <select id="filterEducationStaff" onchange="filterEducationRecords()">
                                <option value="">All Staff</option>
                                <!-- Staff list will be populated dynamically -->
                            </select>
                        </div>
                        <table id="educationTable">
                            <thead>
                                <tr>
                                    <th>Staff Name</th>
                                    <th>Degree</th>
                                    <th>Year</th>
                                    <th>Institute</th>
                                    <th>Grades</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" style="text-align: center; padding: 20px;">No education records found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Staff Salary Records Section -->
            <section id="staff-salary" class="workspace-section">
                <h2>Staff Salary Records</h2>
                <div style="margin-bottom: 20px;">
                    <div class="form-grid">
                        <div class="field">
                            <label>Select Month</label>
                            <input type="month" id="salaryMonth">
                        </div>
                        <div class="field">
                            <label>Filter by Type</label>
                            <select id="salaryTypeFilter">
                                <option value="">All Staff</option>
                                <option value="teaching">Teaching Staff</option>
                                <option value="non-teaching">Non-Teaching Staff</option>
                            </select>
                        </div>
                    </div>
                </div>

                <table id="salaryTable">
                    <thead>
                        <tr>
                            <th>Staff #</th>
                            <th>Name</th>
                            <th>Designation</th>
                            <th>Monthly Salary</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 20px;">No salary records found</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Staff Attendance Section -->
            <section id="staff-attendance" class="workspace-section">
                <h2>Staff Attendance</h2>
                <div style="margin-bottom: 20px;">
                    <div class="form-grid">
                        <div class="field">
                            <label>Select Date</label>
                            <input type="date" id="attendanceDate" value="">
                        </div>
                        <div class="field">
                            <label>Filter by Type</label>
                            <select id="attendanceTypeFilter">
                                <option value="">All Staff</option>
                                <option value="teaching">Teaching Staff</option>
                                <option value="non-teaching">Non-Teaching Staff</option>
                            </select>
                        </div>
                    </div>
                    <button onclick="markAllPresent()" style="background: #4CAF50; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; margin-right: 10px;">
                        <i class="fas fa-check-circle"></i> Mark All Present
                    </button>
                    <button onclick="saveAttendance()" style="background: #8b0000; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer;">
                        <i class="fas fa-save"></i> Save Attendance
                    </button>
                </div>

                <table id="attendanceTable">
                    <thead>
                        <tr>
                            <th>Staff #</th>
                            <th>Name</th>
                            <th>Designation</th>
                            <th>Present</th>
                            <th>Absent</th>
                            <th>Leave</th>
                            <th>Remarks</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 20px;">No staff records found</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Fee Setup Section (existing) -->
            <section id="fee-setup" class="workspace-section">

                <h2>Fee And Charges Setup</h2>
                <br />
<div style="display:flex">
    <div style="width:35%">
        <form method="post" id="feeForm">
            <input type="hidden" name="editId" id="editId" />

            <div class="field">
                <label>Select Category</label><br>
                <select name="Category" id="category" required>
                    <option value="">--Select--</option>
                    <option value="Admission Charges">Admission Charges</option>
                    <option value="Class Fee Charges">Class Fee Charges</option>
                    <option value="Others">Others</option>
                </select>
            </div>
            <br>

            <div class="field" id="classField" style="display:none">
                <label>Select Class</label><br>
                <select name="classID" id="classID">
                    <option value="">--Select--</option>
                    @if (ViewBag.Classes is not null)
                    {
                        foreach (var cls in ViewBag.Classes)
                        {
                            <option value="@cls.Id">@cls.Prefix</option>
                        }
                    }
                </select>
            </div>
            <br>

            <div class="field">
                <label>Select Feehead</label><br>
                <select name="feeHead" id="feeHead" required>
                    <option value="">--Select--</option>
                </select>
            </div>
            <br>

            <div class="field">
                <label>Enter Fee Amount</label><br>
                <input name="amount" type="number" id="amount" placeholder="5000.." min="0" required />
            </div>
            <br>

            <div>
                <button type="submit" id="submitBtn">Set Fee</button>
                <button type="button" id="cancelEdit" style="display:none; margin-left: 10px;" onclick="resetForm()">Cancel</button>
            </div>
        </form>
    </div>

    <!-- Right Table -->
    <div style="width:65%; margin-left:20px;">
        <div class="field">
            <label>Select Category</label><br>
            <select id="tablecategory">
                <option value="">--Select--</option>
                <option value="Admission Charges">Admission Charges</option>
                <option value="Class Fee Charges">Class Fee Charges</option>
                <option value="Others">Others</option>
            </select>
        </div>
        <br>
        <div class="field" id="tableclassField" style="display:none">
            <label>Select Class</label><br>
            <select id="tableclassID">
                <option value="">--Select--</option>
                @if (ViewBag.Classes is not null)
                {
                    foreach (var cls in ViewBag.Classes)
                    {
                        <option value="@cls.Id">@cls.Prefix</option>
                    }
                }
            </select>
        </div>
        <br />
        <table id="feeTable" border="1" style="border-collapse: collapse; width: 100%;">
            <thead>
                <tr>
                    <th>Fee Head</th>
                    <th>Amount</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody style="text-align:center">
                <tr>
                    <td colspan="3" style="text-align: center;">Please select a category</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
            
            </section>

            <!-- Fee Charges Section (existing) -->
            <section id="fee-charges" class="workspace-section">
                          
                <h2>Fee And Charges Management</h2>
                <br />
                <div style="display:flex; gap:25px;"> <!-- Added small gap here -->
                    <div style="width:35%">
                        <!-- Remove asp-action since we're using AJAX -->
                        <form id="feeForm" method="post">
                            <input type="hidden" id="feeId" />
                            <p style="font-weight: bold;font-size: 22px;margin:0px" id="schoolName">Set Heads</p>
                            <div class="field">
                                <label>Select Category</label><br>
                                <select id="category" required>
                                    <option value="">--Select--</option>
                                    <option value="Admission Charges">Admission Charges</option>
                                    <option value="Class Fee Charges">Class Fee Charges</option>
                                    <option value="Others">Others</option>
                                </select>
                            </div>
                            <br>
                            <div class="field">
                                <label>Enter Feehead Name</label><br>
                                <input id="feeHead" type="text" placeholder="Enter feehead.." required>
                            </div>
                            <br>
                            <div>
                                <button id="submitBtn" type="submit">Set Feehead</button>
                                <button type="button" id="cancelEdit" style="display:none; margin-left: 10px;" onclick="resetForm()">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <div style="width:65%;">
                        <p style="font-weight: bold;font-size: 22px;margin:0px" id="schoolName">Fee Heads List</p>

                        <!-- Category Filter -->
                        <div class="field">
                            <label>Select Category</label><br>
                            <select id="filterCategory">
                                <option value="">--Select--</option>
                                <option value="Admission Charges">Admission Charges</option>
                                <option value="Class Fee Charges">Class Fee Charges</option>
                                <option value="Others">Others</option>
                                <option value="All">All</option>
                            </select>
                        </div>

                        <table id="feeTable" border="1" style="border-collapse: collapse; width: 100%; margin-top: 10px;">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Feehead Name</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody style="text-align:left">
                            </tbody>
                        </table>
                    </div>
                </div>
            
            </section>

            <!-- Challan Form Section -->
            <section id="challan-form" class="workspace-section">
                <h2>Generate Challan Form</h2>
                <div style="max-width: 600px;">
                    <form id="challanForm" onsubmit="generateChallan(event)">
                        <div class="field">
                            <label>Student Name *</label>
                            <input type="text" id="studentName" required placeholder="Enter student name">
                        </div>
                        <div class="field">
                            <label>Class *</label>
                            <select id="studentClass" required>
                                <option value="">--Select Class--</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Fee Month *</label>
                            <input type="month" id="feeMonth" required>
                        </div>
                        <div class="field">
                            <label>Select Fee Heads *</label>
                            <div id="feeHeadsCheckbox" style="border: 1px solid #ddd; padding: 10px; border-radius: 6px; max-height: 200px; overflow-y: auto;">
                                <!-- Fee heads will be populated dynamically -->
                                <p style="color: #999;">Please select a class first</p>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <button type="submit" id="submitBtn">Generate Challan</button>
                            <button type="button" id="cancelEdit" onclick="resetChallanForm()">Reset</button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Generated Forms Section -->
            <section id="generated-forms" class="workspace-section">
                <h2>Generated Challan Forms</h2>
                <div style="margin-bottom: 20px;">
                    <div class="form-grid">
                        <div class="field">
                            <label>Filter by Month</label>
                            <input type="month" id="filterMonth">
                        </div>
                        <div class="field">
                            <label>Search Student</label>
                            <input type="text" id="searchStudent" placeholder="Search by student name...">
                        </div>
                    </div>
                </div>

                <table id="generatedFormsTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Student Name</th>
                            <th>Class</th>
                            <th>Month</th>
                            <th>Total Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 20px;">No generated forms found</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Add New Teacher Section -->
            <section id="add-teacher" class="workspace-section">
                <h2>Add New Teacher</h2>
                <form id="addTeacherForm" onsubmit="submitTeacherForm(event)">
                    <div class="form-grid">
                        <div class="field">
                            <label>Full Name *</label>
                            <input type="text" id="teacher_name" name="teacher_name" required placeholder="Enter full name">
                        </div>
                        <div class="field">
                            <label>Teacher ID *</label>
                            <input type="text" id="teacher_id" name="teacher_id" required placeholder="e.g., TCH001">
                        </div>
                        <div class="field">
                            <label>Gender *</label>
                            <select id="teacher_gender" name="teacher_gender" required>
                                <option value="">--Select--</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Date of Birth *</label>
                            <input type="date" id="teacher_dob" name="teacher_dob" required>
                        </div>
                        <div class="field">
                            <label>Qualification *</label>
                            <input type="text" id="teacher_qualification" name="teacher_qualification" required placeholder="e.g., M.Ed, B.Sc">
                        </div>
                        <div class="field">
                            <label>Specialization *</label>
                            <input type="text" id="teacher_specialization" name="teacher_specialization" required placeholder="e.g., Mathematics, English">
                        </div>
                        <div class="field">
                            <label>Experience (Years) *</label>
                            <input type="number" id="teacher_experience" name="teacher_experience" required placeholder="5">
                        </div>
                        <div class="field">
                            <label>Joining Date *</label>
                            <input type="date" id="teacher_joiningdate" name="teacher_joiningdate" required>
                        </div>
                        <div class="field">
                            <label>Contact Number *</label>
                            <input type="text" id="teacher_contact" name="teacher_contact" required placeholder="03XX-XXXXXXX">
                        </div>
                        <div class="field">
                            <label>Email *</label>
                            <input type="email" id="teacher_email" name="teacher_email" required placeholder="email@example.com">
                        </div>
                        <div class="field">
                            <label>Monthly Salary *</label>
                            <input type="number" id="teacher_salary" name="teacher_salary" required placeholder="60000">
                        </div>
                        <div class="field">
                            <label>Employment Type *</label>
                            <select id="teacher_employment" name="teacher_employment" required>
                                <option value="">--Select--</option>
                                <option value="Permanent">Permanent</option>
                                <option value="Contract">Contract</option>
                                <option value="Part-Time">Part-Time</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-grid full-width">
                        <div class="field">
                            <label>Address</label>
                            <textarea id="teacher_address" name="teacher_address" placeholder="Enter full address"></textarea>
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <button type="submit" id="submitBtn">Add Teacher</button>
                        <button type="button" id="cancelEdit" onclick="resetTeacherForm()">Reset Form</button>
                    </div>
                </form>
            </section>

            <!-- View All Teachers Section -->
            <section id="view-teachers" class="workspace-section">
                <h2>View All Teachers</h2>
                <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                    <div class="field" style="flex: 1; margin-bottom: 0;">
                        <label>Filter by Subject</label>
                        <select id="teacherSubjectFilter" onchange="filterTeachers()">
                            <option value="">All Subjects</option>
                            <option value="Mathematics">Mathematics</option>
                            <option value="English">English</option>
                            <option value="Science">Science</option>
                            <option value="Urdu">Urdu</option>
                            <option value="Islamiyat">Islamiyat</option>
                        </select>
                    </div>
                    <div class="field" style="flex: 1; margin-bottom: 0;">
                        <label>Search</label>
                        <input type="text" id="searchTeacher" placeholder="Search by name or ID..." onkeyup="searchTeacherTable()">
                    </div>
                </div>
                
                <table id="teachersTable">
                    <thead>
                        <tr>
                            <th>Teacher ID</th>
                            <th>Name</th>
                            <th>Qualification</th>
                            <th>Specialization</th>
                            <th>Experience</th>
                            <th>Contact</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 20px;">No teacher records found</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Teacher Schedule Section -->
            <section id="teacher-schedule" class="workspace-section">
                <h2>Teacher Schedule</h2>
                <div class="two-column-layout">
                    <div class="form-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Create Schedule</h3>
                        <form id="teacherScheduleForm" onsubmit="submitScheduleForm(event)">
                            <div class="field">
                                <label>Select Teacher *</label>
                                <select id="schedule_teacher" name="schedule_teacher" required>
                                    <option value="">--Select Teacher--</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Day *</label>
                                <select id="schedule_day" name="schedule_day" required>
                                    <option value="">--Select Day--</option>
                                    <option value="Monday">Monday</option>
                                    <option value="Tuesday">Tuesday</option>
                                    <option value="Wednesday">Wednesday</option>
                                    <option value="Thursday">Thursday</option>
                                    <option value="Friday">Friday</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Time Slot *</label>
                                <input type="text" id="schedule_time" name="schedule_time" required placeholder="e.g., 8:00 AM - 9:00 AM">
                            </div>
                            <div class="field">
                                <label>Class *</label>
                                <select id="schedule_class" name="schedule_class" required>
                                    <option value="">--Select Class--</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Subject *</label>
                                <input type="text" id="schedule_subject" name="schedule_subject" required placeholder="e.g., Mathematics">
                            </div>
                            <div style="margin-top: 15px;">
                                <button type="submit" id="submitBtn">Add Schedule</button>
                                <button type="button" id="cancelEdit" onclick="resetScheduleForm()">Reset</button>
                            </div>
                        </form>
                    </div>

                    <div class="table-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Weekly Schedule</h3>
                        <div class="field" style="margin-bottom: 15px;">
                            <label>Filter by Teacher</label>
                            <select id="filterScheduleTeacher" onchange="filterSchedule()">
                                <option value="">All Teachers</option>
                            </select>
                        </div>
                        <table id="scheduleTable">
                            <thead>
                                <tr>
                                    <th>Teacher</th>
                                    <th>Day</th>
                                    <th>Time</th>
                                    <th>Class</th>
                                    <th>Subject</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" style="text-align: center; padding: 20px;">No schedule records found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Teacher Subject Assignment Section -->
            <section id="teacher-subjects" class="workspace-section">
                <h2>Subject Assignment</h2>
                <div class="two-column-layout">
                    <div class="form-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Assign Subject</h3>
                        <form id="subjectAssignForm" onsubmit="submitSubjectAssignment(event)">
                            <div class="field">
                                <label>Select Teacher *</label>
                                <select id="assign_teacher" name="assign_teacher" required>
                                    <option value="">--Select Teacher--</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Subject *</label>
                                <input type="text" id="assign_subject" name="assign_subject" required placeholder="e.g., Mathematics">
                            </div>
                            <div class="field">
                                <label>Classes (multiple) *</label>
                                <select id="assign_classes" name="assign_classes" multiple required style="height: 100px;">
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                </select>
                                <small style="color: #666;">Hold Ctrl to select multiple classes</small>
                            </div>
                            <div style="margin-top: 15px;">
                                <button type="submit" id="submitBtn">Assign Subject</button>
                                <button type="button" id="cancelEdit" onclick="resetSubjectAssignForm()">Reset</button>
                            </div>
                        </form>
                    </div>

                    <div class="table-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Subject Assignments</h3>
                        <table id="subjectAssignTable">
                            <thead>
                                <tr>
                                    <th>Teacher</th>
                                    <th>Subject</th>
                                    <th>Classes</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="4" style="text-align: center; padding: 20px;">No subject assignments found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Teacher Performance Section -->
            <section id="teacher-performance" class="workspace-section">
                <h2>Teacher Performance Review</h2>
                <div style="margin-bottom: 20px;">
                    <div class="form-grid">
                        <div class="field">
                            <label>Select Teacher</label>
                            <select id="performanceTeacher">
                                <option value="">All Teachers</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Review Period</label>
                            <select id="performancePeriod">
                                <option value="">--Select Period--</option>
                                <option value="monthly">Monthly</option>
                                <option value="quarterly">Quarterly</option>
                                <option value="annually">Annually</option>
                            </select>
                        </div>
                    </div>
                </div>

                <table id="performanceTable">
                    <thead>
                        <tr>
                            <th>Teacher Name</th>
                            <th>Period</th>
                            <th>Attendance %</th>
                            <th>Student Feedback</th>
                            <th>Rating</th>
                            <th>Remarks</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 20px;">No performance records found</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Add New Class Section -->
            <section id="add-class" class="workspace-section">
                <h2>Add New Class</h2>
                <form id="addClassForm" onsubmit="submitClassForm(event)">
                    <div class="form-grid">
                        <div class="field">
                            <label>Class Name *</label>
                            <input type="text" id="class_name" name="class_name" required placeholder="e.g., Class 1, Grade 5">
                        </div>
                        <div class="field">
                            <label>Class Code *</label>
                            <input type="text" id="class_code" name="class_code" required placeholder="e.g., CLS-01">
                        </div>
                        <div class="field">
                            <label>Level *</label>
                            <select id="class_level" name="class_level" required>
                                <option value="">--Select Level--</option>
                                <option value="Pre-Primary">Pre-Primary</option>
                                <option value="Primary">Primary (1-5)</option>
                                <option value="Middle">Middle (6-8)</option>
                                <option value="Secondary">Secondary (9-10)</option>
                                <option value="Higher Secondary">Higher Secondary (11-12)</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Class Teacher</label>
                            <select id="class_teacher" name="class_teacher">
                                <option value="">--Select Teacher--</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Total Sections *</label>
                            <input type="number" id="class_sections" name="class_sections" required placeholder="1" min="1">
                        </div>
                        <div class="field">
                            <label>Capacity Per Section *</label>
                            <input type="number" id="class_capacity" name="class_capacity" required placeholder="30" min="1">
                        </div>
                        <div class="field">
                            <label>Academic Year *</label>
                            <input type="text" id="class_year" name="class_year" required placeholder="2024-2025">
                        </div>
                        <div class="field">
                            <label>Room Number</label>
                            <input type="text" id="class_room" name="class_room" placeholder="e.g., Room 101">
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <button type="submit" id="submitBtn">Add Class</button>
                        <button type="button" id="cancelEdit" onclick="resetClassForm()">Reset Form</button>
                    </div>
                </form>
            </section>

            <!-- View All Classes Section -->
            <section id="view-classes" class="workspace-section">
                <h2>View All Classes</h2>
                <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center;">
                    <div class="field" style="flex: 1; margin-bottom: 0;">
                        <label>Filter by Level</label>
                        <select id="classLevelFilter" onchange="filterClasses()">
                            <option value="">All Levels</option>
                            <option value="Pre-Primary">Pre-Primary</option>
                            <option value="Primary">Primary (1-5)</option>
                            <option value="Middle">Middle (6-8)</option>
                            <option value="Secondary">Secondary (9-10)</option>
                            <option value="Higher Secondary">Higher Secondary (11-12)</option>
                        </select>
                    </div>
                    <div class="field" style="flex: 1; margin-bottom: 0;">
                        <label>Search</label>
                        <input type="text" id="searchClass" placeholder="Search by class name or code..." onkeyup="searchClassTable()">
                    </div>
                </div>
                
                <table id="classesTable">
                    <thead>
                        <tr>
                            <th>Class Code</th>
                            <th>Class Name</th>
                            <th>Level</th>
                            <th>Class Teacher</th>
                            <th>Sections</th>
                            <th>Capacity</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 20px;">No class records found</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Class Sections Management Section -->
            <section id="class-sections-standalone" class="workspace-section">
                <h2>Manage Class Sections</h2>
                <div class="two-column-layout">
                    <div class="form-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Create Section</h3>
                        <form id="classSectionForm" onsubmit="submitSectionForm(event)">
                            <div class="field">
                                <label>Select Class *</label>
                                <select id="section_class" name="section_class" required>
                                    <option value="">--Select Class--</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Section Name *</label>
                                <input type="text" id="section_name" name="section_name" required placeholder="e.g., A, B, C">
                            </div>
                            <div class="field">
                                <label>Section Teacher</label>
                                <select id="section_teacher" name="section_teacher">
                                    <option value="">--Select Teacher--</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Capacity *</label>
                                <input type="number" id="section_capacity" name="section_capacity" required placeholder="30" min="1">
                            </div>
                            <div class="field">
                                <label>Room Number</label>
                                <input type="text" id="section_room" name="section_room" placeholder="e.g., Room 101">
                            </div>
                            <div style="margin-top: 15px;">
                                <button type="submit" id="submitBtn">Create Section</button>
                                <button type="button" id="cancelEdit" onclick="resetSectionForm()">Reset</button>
                            </div>
                        </form>
                    </div>

                    <div class="table-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Sections List</h3>
                        <div class="field" style="margin-bottom: 15px;">
                            <label>Filter by Class</label>
                            <select id="filterSectionClass" onchange="filterSections()">
                                <option value="">All Classes</option>
                            </select>
                        </div>
                        <table id="sectionsTable">
                            <thead>
                                <tr>
                                    <th>Class</th>
                                    <th>Section</th>
                                    <th>Teacher</th>
                                    <th>Capacity</th>
                                    <th>Room</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" style="text-align: center; padding: 20px;">No section records found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Class Timetable Section -->
            <section id="class-timetable" class="workspace-section">
                <h2>Class Timetable</h2>
                <div style="margin-bottom: 20px;">
                    <div class="form-grid">
                        <div class="field">
                            <label>Select Class *</label>
                            <select id="timetable_class" onchange="loadTimetable()">
                                <option value="">--Select Class--</option>
                            </select>
                        </div>
                        <div class="field">
                            <label>Select Section</label>
                            <select id="timetable_section" onchange="loadTimetable()">
                                <option value="">--Select Section--</option>
                            </select>
                        </div>
                    </div>
                    <button onclick="createTimetable()" style="background: #8b0000; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; margin-right: 10px;">
                        <i class="fas fa-plus"></i> Create New Entry
                    </button>
                    <button onclick="printTimetable()" style="background: #4CAF50; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer;">
                        <i class="fas fa-print"></i> Print Timetable
                    </button>
                </div>

                <div id="timetableContainer">
                    <table id="timetableTable">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Monday</th>
                                <th>Tuesday</th>
                                <th>Wednesday</th>
                                <th>Thursday</th>
                                <th>Friday</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 20px;">Please select a class to view timetable</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Class Subject Configuration Section -->
            <section id="class-subjects" class="workspace-section">
                <h2>Subject Configuration</h2>
                <div class="two-column-layout">
                    <div class="form-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Add Subject</h3>
                        <form id="classSubjectForm" onsubmit="submitClassSubject(event)">
                            <div class="field">
                                <label>Select Class *</label>
                                <select id="subject_class" name="subject_class" required>
                                    <option value="">--Select Class--</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Subject Name *</label>
                                <input type="text" id="subject_name" name="subject_name" required placeholder="e.g., Mathematics">
                            </div>
                            <div class="field">
                                <label>Subject Code *</label>
                                <input type="text" id="subject_code" name="subject_code" required placeholder="e.g., MATH-101">
                            </div>
                            <div class="field">
                                <label>Subject Type *</label>
                                <select id="subject_type" name="subject_type" required>
                                    <option value="">--Select Type--</option>
                                    <option value="Core">Core</option>
                                    <option value="Elective">Elective</option>
                                    <option value="Additional">Additional</option>
                                </select>
                            </div>
                            <div class="field">
                                <label>Total Marks *</label>
                                <input type="number" id="subject_marks" name="subject_marks" required placeholder="100" min="1">
                            </div>
                            <div class="field">
                                <label>Passing Marks *</label>
                                <input type="number" id="subject_passing" name="subject_passing" required placeholder="33" min="1">
                            </div>
                            <div style="margin-top: 15px;">
                                <button type="submit" id="submitBtn">Add Subject</button>
                                <button type="button" id="cancelEdit" onclick="resetClassSubjectForm()">Reset</button>
                            </div>
                        </form>
                    </div>

                    <div class="table-column">
                        <h3 style="color: #8b0000; margin-bottom: 15px;">Subjects List</h3>
                        <div class="field" style="margin-bottom: 15px;">
                            <label>Filter by Class</label>
                            <select id="filterSubjectClass" onchange="filterSubjects()">
                                <option value="">All Classes</option>
                            </select>
                        </div>
                        <table id="classSubjectsTable">
                            <thead>
                                <tr>
                                    <th>Class</th>
                                    <th>Subject</th>
                                    <th>Code</th>
                                    <th>Type</th>
                                    <th>Marks</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" style="text-align: center; padding: 20px;">No subject records found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        /**
         * ============================================================================
         * SCHOOL MANAGEMENT SYSTEM - NAVIGATION & STATE MANAGEMENT
         * ============================================================================
         * Professional sidebar-dashboard synchronization with localStorage persistence
         * Author: Admin Panel System
         * Version: 2.0
         */

        // ============================================================================
        // STATE MANAGEMENT
        // ============================================================================
        
        const AppState = {
            currentSection: null,
            currentDashboard: null,
            currentContent: null,
            openMenu: null,

            // Save state to localStorage
            save() {
                const state = {
                    currentSection: this.currentSection,
                    currentDashboard: this.currentDashboard,
                    currentContent: this.currentContent,
                    openMenu: this.openMenu
                };
                localStorage.setItem('sms_app_state', JSON.stringify(state));
            },

            // Load state from localStorage
            load() {
                const saved = localStorage.getItem('sms_app_state');
                if (saved) {
                    const state = JSON.parse(saved);
                    Object.assign(this, state);
                    return true;
                }
                return false;
            },

            // Clear state
            clear() {
                this.currentSection = null;
                this.currentDashboard = null;
                this.currentContent = null;
                this.openMenu = null;
                localStorage.removeItem('sms_app_state');
            }
        };

        // ============================================================================
        // NAVIGATION CONTROLLER
        // ============================================================================

        const NavigationController = {
            // Initialize the navigation system
            init() {
                this.setupEventListeners();
                this.restoreState();
                this.setInitialDate();
            },

            // Set up all event listeners
            setupEventListeners() {
                // Dashboard link
                const dashboardLink = document.querySelector('a[onclick*="dashboard"]');
                if (dashboardLink) {
                    dashboardLink.onclick = (e) => {
                        e.preventDefault();
                        this.navigateToDashboard();
                    };
                }
            },

            // Restore previous state from localStorage
            restoreState() {
                if (AppState.load()) {
                    // Restore the previous state
                    if (AppState.currentDashboard && AppState.currentContent) {
                        this.showContentInDashboard(AppState.currentDashboard, AppState.currentContent);
                    } else if (AppState.currentDashboard) {
                        this.openManagementDashboard(AppState.currentDashboard);
                    } else if (AppState.currentSection) {
                        this.showSection(AppState.currentSection);
                    } else {
                        this.showDashboard();
                    }
                } else {
                    // Default to dashboard
                    this.showDashboard();
                }
            },

            // Navigate to main dashboard
            navigateToDashboard() {
                this.closeAllDropdowns();
                this.showSection('dashboard');
                this.setActiveMenuItem('dashboard');
                
                AppState.currentSection = 'dashboard';
                AppState.currentDashboard = null;
                AppState.currentContent = null;
                AppState.openMenu = null;
                AppState.save();
            },

            // Show dashboard section
            showDashboard() {
                this.hideAllSections();
                const dashboard = document.getElementById('dashboard');
                if (dashboard) {
                    dashboard.classList.add('active');
                }
                this.setActiveMenuItem('dashboard');
            },

            // Open a management dashboard
            openManagementDashboard(dashboardId, fromSidebar = false) {
                // Hide all sections
                this.hideAllSections();

                // Show the management dashboard
                const dashboard = document.getElementById(dashboardId);
                if (dashboard) {
                    dashboard.classList.add('active');
                }

                // Find the parent menu item
                const parentMenu = document.querySelector(`[data-dashboard="${dashboardId}"]`);
                if (parentMenu) {
                    // Close all other dropdowns
                    this.closeAllDropdowns();
                    
                    // Clear all active states
                    this.clearAllActiveStates();

                    // Open this dropdown
                    parentMenu.classList.add('open');
                    parentMenu.classList.add('active');
                    const submenu = parentMenu.querySelector('.submenu');
                    if (submenu) {
                        submenu.classList.add('show');
                    }

                    // Remove active from dashboard link
                    this.clearDashboardActive();
                }

                // Hide all content items in this dashboard
                this.hideAllContentInDashboard(dashboardId);

                // Update state
                AppState.currentSection = null;
                AppState.currentDashboard = dashboardId;
                AppState.currentContent = null;
                AppState.openMenu = dashboardId;
                AppState.save();

                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            },

            // Show content within a dashboard
            showContentInDashboard(dashboardId, contentId, fromEvent = null) {
                // Show the dashboard
                this.hideAllSections();
                const dashboard = document.getElementById(dashboardId);
                if (dashboard) {
                    dashboard.classList.add('active');
                }

                // Hide all content items
                this.hideAllContentInDashboard(dashboardId);

                // Show the selected content
                const contentItem = document.getElementById(contentId);
                if (contentItem) {
                    contentItem.style.display = 'block';
                    
                    // Scroll to content smoothly
                    setTimeout(() => {
                        const yOffset = -20;
                        const element = contentItem;
                        const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset;
                        window.scrollTo({ top: y, behavior: 'smooth' });
                    }, 100);
                }

                // Update sidebar menu
                this.updateSidebarForContent(dashboardId, contentId);

                // Highlight the active card
                this.highlightActiveCard(dashboard, contentId);

                // Update state
                AppState.currentSection = null;
                AppState.currentDashboard = dashboardId;
                AppState.currentContent = contentId;
                AppState.openMenu = dashboardId;
                AppState.save();
            },

            // Update sidebar menu active states for content
            updateSidebarForContent(dashboardId, contentId) {
                // Clear all active states
                this.clearAllActiveStates();

                // Find parent menu
                const parentMenu = document.querySelector(`[data-dashboard="${dashboardId}"]`);
                if (parentMenu) {
                    // Open and activate parent
                    parentMenu.classList.add('open');
                    parentMenu.classList.add('active');
                    const submenu = parentMenu.querySelector('.submenu');
                    if (submenu) {
                        submenu.classList.add('show');
                    }

                    // Find and activate the specific submenu item
                    const submenuLinks = submenu.querySelectorAll('a');
                    submenuLinks.forEach(link => {
                        if (link.getAttribute('onclick') && link.getAttribute('onclick').includes(`'${contentId}'`)) {
                            const parentLi = link.closest('li');
                            if (parentLi) {
                                parentLi.classList.add('active');
                            }
                        }
                    });
                }
            },

            // Highlight active card in dashboard
            highlightActiveCard(dashboard, contentId) {
                if (!dashboard) return;

                const cards = dashboard.querySelectorAll('.submenu-option-card');
                cards.forEach(card => {
                    card.classList.remove('active-card');
                    const onclick = card.getAttribute('onclick');
                    if (onclick && onclick.includes(`'${contentId}'`)) {
                        card.classList.add('active-card');
                    }
                });
            },

            // Show a standalone section
            showSection(sectionId) {
                this.hideAllSections();
                const section = document.getElementById(sectionId);
                if (section) {
                    section.classList.add('active');
                }

                this.setActiveMenuItem(sectionId);

                AppState.currentSection = sectionId;
                AppState.currentDashboard = null;
                AppState.currentContent = null;
                AppState.save();
            },

            // Set active menu item
            setActiveMenuItem(sectionId) {
                this.clearAllActiveStates();

                if (sectionId === 'dashboard') {
                    const dashboardLink = document.querySelector('.sidebar nav li:first-child');
                    if (dashboardLink) {
                        dashboardLink.classList.add('active');
                    }
                }
            },

            // Utility functions
            hideAllSections() {
                const sections = document.querySelectorAll('.workspace-section');
                sections.forEach(section => section.classList.remove('active'));
            },

            hideAllContentInDashboard(dashboardId) {
                const dashboard = document.getElementById(dashboardId);
                if (dashboard) {
                    const contentArea = dashboard.querySelector('.dashboard-content-area');
                    if (contentArea) {
                        const items = contentArea.querySelectorAll('.dashboard-content-item');
                        items.forEach(item => item.style.display = 'none');
                    }
                }
            },

            closeAllDropdowns() {
                const dropdowns = document.querySelectorAll('.has-submenu');
                dropdowns.forEach(dropdown => {
                    dropdown.classList.remove('open');
                    const submenu = dropdown.querySelector('.submenu');
                    if (submenu) {
                        submenu.classList.remove('show');
                    }
                });
            },

            clearAllActiveStates() {
                // Remove active from all menu items
                const allMenuItems = document.querySelectorAll('.sidebar nav li');
                allMenuItems.forEach(item => item.classList.remove('active'));
            },

            clearDashboardActive() {
                const dashboardLink = document.querySelector('.sidebar nav li:first-child');
                if (dashboardLink) {
                    dashboardLink.classList.remove('active');
                }
            },

            setInitialDate() {
                const attendanceDate = document.getElementById('attendanceDate');
                if (attendanceDate) {
                    attendanceDate.valueAsDate = new Date();
                }
            }
        };

        // ============================================================================
        // GLOBAL FUNCTIONS (Called from HTML onclick attributes)
        // ============================================================================

        // Open management dashboard from sidebar parent menu
        function openManagementDashboard(event, element, dashboardId) {
            event.preventDefault();
            const parent = element.parentElement;
            
            // Toggle behavior: if already open, close it
            if (parent.classList.contains('open')) {
                // Close the dropdown
                parent.classList.remove('open');
                parent.classList.remove('active');
                const submenu = parent.querySelector('.submenu');
                if (submenu) {
                    submenu.classList.remove('show');
                }
                
                // Show the management dashboard (without submenu open)
                NavigationController.hideAllSections();
                const dashboard = document.getElementById(dashboardId);
                if (dashboard) {
                    dashboard.classList.add('active');
                }
                
                // Hide all content in dashboard
                NavigationController.hideAllContentInDashboard(dashboardId);
                
                // Update state
                AppState.currentSection = null;
                AppState.currentDashboard = dashboardId;
                AppState.currentContent = null;
                AppState.openMenu = null;
                AppState.save();
            } else {
                // Open the dropdown and dashboard
                NavigationController.openManagementDashboard(dashboardId, true);
            }
        }

        // Show content within dashboard (from cards or sidebar)
        function showContentInDashboard(dashboardId, contentId, event) {
            if (event) event.preventDefault();
            NavigationController.showContentInDashboard(dashboardId, contentId, event);
        }

        // Show section (for sections outside dashboards)
        function showSection(sectionId, event) {
            if (event) event.preventDefault();
            NavigationController.showSection(sectionId);
        }

        // Toggle submenu (backup function)
        function toggleSubmenu(event, element) {
            event.preventDefault();
            const parent = element.parentElement;
            const submenu = parent.querySelector('.submenu');
            
            parent.classList.toggle('open');
            if (submenu) {
                submenu.classList.toggle('show');
            }
        }

        // ============================================================================
        // INITIALIZATION
        // ============================================================================

        document.addEventListener('DOMContentLoaded', function() {
            // Clear old localStorage state to fix any caching issues
            const APP_VERSION = '2.0';
            const storedVersion = localStorage.getItem('appVersion');
            
            if (storedVersion !== APP_VERSION) {
                console.log('🔄 Clearing old app state. Version:', storedVersion, '→', APP_VERSION);
                localStorage.clear();
                localStorage.setItem('appVersion', APP_VERSION);
            }
            
            NavigationController.init();
        });

        // ============================================================================
        // BUSINESS LOGIC FUNCTIONS (Form Submissions, Data Operations)
        // ============================================================================

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = '/logout';
            }
        }

        // Toggle Management Menu (for main dashboard cards) - v2.0
        function toggleManagementMenu(menuType, event) {
            // Prevent default and stop propagation
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }

            console.log('=== toggleManagementMenu v2.0 ===');
            console.log('menuType:', menuType);
            console.log('event:', event);

            const dashboardMap = {
                'staff': 'staff-management-dashboard',
                'teacher': 'teacher-management-dashboard',
                'classes': 'classes-management-dashboard',
                'fee': 'fee-management-dashboard',
                'school': 'school-setup-dashboard'
            };

            const dashboardId = dashboardMap[menuType];
            console.log('Mapped to dashboardId:', dashboardId);
            
            if (!dashboardId) {
                console.error('❌ No dashboardId found for:', menuType);
                return;
            }

            console.log('✅ Opening dashboard:', dashboardId);

            // STEP 1: Hide all sections
            const sections = document.querySelectorAll('.workspace-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // STEP 2: Show the management dashboard
            const dashboard = document.getElementById(dashboardId);
            if (dashboard) {
                dashboard.classList.add('active');
                console.log('Dashboard shown:', dashboardId);
            } else {
                console.error('Dashboard not found:', dashboardId);
            }
            
            // STEP 3: Close ALL dropdowns first
            const allDropdowns = document.querySelectorAll('.has-submenu');
            allDropdowns.forEach(dropdown => {
                dropdown.classList.remove('open');
                dropdown.classList.remove('active');
                const sub = dropdown.querySelector('.submenu');
                if (sub) {
                    sub.classList.remove('show');
                }
            });
            
            // STEP 4: Clear all active states
            const allMenuItems = document.querySelectorAll('.sidebar nav li');
            allMenuItems.forEach(item => item.classList.remove('active'));
            
            // STEP 5: Find and FORCE OPEN the specific dropdown
            console.log('Looking for selector: [data-dashboard="' + dashboardId + '"]');
            
            // Debug: Show all elements with data-dashboard attribute
            const allDataDashboards = document.querySelectorAll('[data-dashboard]');
            console.log('All elements with data-dashboard:', allDataDashboards.length);
            allDataDashboards.forEach((el, idx) => {
                console.log(`  ${idx + 1}. data-dashboard="${el.getAttribute('data-dashboard')}"`, el);
            });
            
            const parentMenu = document.querySelector(`[data-dashboard="${dashboardId}"]`);
            if (parentMenu) {
                console.log('✅ Found parent menu:', parentMenu);
                console.log('   - Element tagName:', parentMenu.tagName);
                console.log('   - Element classes:', parentMenu.className);
                console.log('   - data-dashboard:', parentMenu.getAttribute('data-dashboard'));
                
                // Add open and active classes
                parentMenu.classList.add('open');
                parentMenu.classList.add('active');
                
                // Get submenu and FORCE it to show
                const submenu = parentMenu.querySelector('.submenu');
                if (submenu) {
                    console.log('✅ Found submenu:', submenu);
                    // Remove any inline styles that might block it
                    submenu.style.display = '';
                    submenu.style.maxHeight = '';
                    submenu.style.opacity = '';
                    
                    // Force reflow
                    void submenu.offsetHeight;
                    
                    // Add show class
                    submenu.classList.add('show');
                    
                    console.log('✅ Submenu shown, classes:', submenu.className);
                } else {
                    console.error('❌ Submenu not found for parent:', parentMenu);
                }
                
                console.log('✅ Dropdown opened for:', menuType, 'Parent classes:', parentMenu.className);
            } else {
                console.error('❌ Could not find parent menu for:', dashboardId);
                console.error('   Selector used: [data-dashboard="' + dashboardId + '"]');
            }
            
            // STEP 6: Hide all content in dashboard
            if (dashboard) {
                const contentArea = dashboard.querySelector('.dashboard-content-area');
                if (contentArea) {
                    const items = contentArea.querySelectorAll('.dashboard-content-item');
                    items.forEach(item => item.style.display = 'none');
                }
            }
            
            // STEP 7: Update state
            AppState.currentSection = null;
            AppState.currentDashboard = dashboardId;
            AppState.currentContent = null;
            AppState.openMenu = dashboardId;
            AppState.save();
            
            // STEP 8: Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Staff Form Functions
        function submitStaffForm(event) {
            event.preventDefault();
            alert('Staff member added successfully! (Connect to backend)');
            resetStaffForm();
        }

        function resetStaffForm() {
            document.getElementById('addStaffForm').reset();
        }

        function filterStaff() {
            alert('Filter staff by type (Connect to backend)');
        }

        function searchStaffTable() {
            alert('Search staff (Connect to backend)');
        }

        // Education Form Functions
        function submitEducationForm(event) {
            event.preventDefault();
            alert('Education record added successfully! (Connect to backend)');
            resetEducationForm();
        }

        function resetEducationForm() {
            document.getElementById('staffEducationForm').reset();
        }

        function filterEducationRecords() {
            alert('Filter education records (Connect to backend)');
        }

        // Attendance Functions
        function markAllPresent() {
            const checkboxes = document.querySelectorAll('#attendanceTable input[type="radio"][value="present"]');
            checkboxes.forEach(cb => cb.checked = true);
        }

        function saveAttendance() {
            alert('Attendance saved successfully! (Connect to backend)');
        }

        // Fee Setup Functions
        function submitFeeSetup(event) {
            event.preventDefault();
            alert('Fee setup saved successfully! (Connect to backend)');
        }

        function resetFeeSetupForm() {
            document.getElementById('feeSetupForm').reset();
        }

        // Fee Charges Functions
        function submitFeeForm(event) {
            event.preventDefault();
            alert('Fee head created successfully! (Connect to backend)');
            resetFeeForm();
        }

        function resetFeeForm() {
            document.getElementById('feeForm').reset();
        }

        // Challan Functions
        function generateChallan(event) {
            event.preventDefault();
            alert('Challan generated successfully! (Connect to backend)');
        }

        function resetChallanForm() {
            document.getElementById('challanForm').reset();
        }

        // School Setup Functions
        function submitSchoolInfo(event) {
            event.preventDefault();
            alert('School information saved successfully! (Connect to backend)');
            // Here you would send data to backend
            // resetSchoolInfoForm();
        }

        function resetSchoolInfoForm() {
            document.getElementById('schoolInfoForm').reset();
        }

        function submitBankDetails(event) {
            event.preventDefault();
            alert('Bank details saved successfully! (Connect to backend)');
            // Here you would send data to backend
            // resetBankDetailsForm();
        }

        function resetBankDetailsForm() {
            document.getElementById('bankDetailsForm').reset();
        }

        function submitClassConfig(event) {
            event.preventDefault();
            
            // Get form data - school ID will be determined by logged-in user's session
            const formData = {
                cls_name: document.getElementById('cls_name').value,
                cls_prefix: document.getElementById('cls_prefix').value,
                cls_academicyear: document.getElementById('cls_academicyear').value,
                cls_maxstudents: document.getElementById('cls_maxstudents').value,
                cls_teacherid: document.getElementById('cls_teacherid').value,
                cls_roomnumber: document.getElementById('cls_roomnumber').value,
                cls_description: document.getElementById('cls_description').value,
                cls_subjectwiseteaching: document.getElementById('cls_subjectwiseteaching').checked,
                cls_active: document.getElementById('cls_active').checked
            };
            
            console.log('Class Data:', formData);
            alert('Class added successfully! (Connect to backend to save data)');
            // Here you would send data to backend
            // School ID will be automatically added from session on backend
            // Example: fetch('/api/classes', { method: 'POST', body: JSON.stringify(formData) })
            resetClassConfigForm();
        }

        function resetClassConfigForm() {
            document.getElementById('classesConfigForm').reset();
            document.getElementById('cls_active').checked = true;
        }

        function searchClassesTable() {
            const searchTerm = document.getElementById('searchClasses').value.toLowerCase();
            const table = document.getElementById('classesConfigTable');
            const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const cells = row.getElementsByTagName('td');
                let found = false;
                
                for (let j = 0; j < cells.length; j++) {
                    const cell = cells[j];
                    if (cell.textContent.toLowerCase().indexOf(searchTerm) > -1) {
                        found = true;
                        break;
                    }
                }
                
                row.style.display = found ? '' : 'none';
            }
        }

        function submitClassSection(event) {
            event.preventDefault();
            
            // Get form data - school ID will be determined by logged-in user's session
            const formData = {
                cse_classid: document.getElementById('cse_classid').value,
                cse_prefix: document.getElementById('cse_prefix').value,
                cse_description: document.getElementById('cse_description').value,
                cse_year: document.getElementById('cse_year').value,
                cse_lastrollnumber: document.getElementById('cse_lastrollnumber').value,
                cse_requiresassistant: document.getElementById('cse_requiresassistant').checked,
                cse_active: document.getElementById('cse_active').checked
            };
            
            console.log('Section Data:', formData);
            alert('Class section added successfully! (Connect to backend to save data)');
            // Here you would send data to backend
            // School ID will be automatically added from session on backend
            // Example: fetch('/api/sections', { method: 'POST', body: JSON.stringify(formData) })
            resetClassSectionForm();
        }

        function resetClassSectionForm() {
            document.getElementById('classSectionsForm').reset();
            document.getElementById('cse_active').checked = true;
            document.getElementById('cse_lastrollnumber').value = 0;
        }

        function filterSectionsByClass() {
            const classId = document.getElementById('filterClassSections').value;
            alert('Filter sections by class ID: ' + classId + ' (Connect to backend)');
            // Here you would filter the table based on selected class
        }

        function searchSectionsTable() {
            const searchTerm = document.getElementById('searchSections').value.toLowerCase();
            const table = document.getElementById('classSectionsTable');
            const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const cells = row.getElementsByTagName('td');
                let found = false;
                
                for (let j = 0; j < cells.length; j++) {
                    const cell = cells[j];
                    if (cell.textContent.toLowerCase().indexOf(searchTerm) > -1) {
                        found = true;
                        break;
                    }
                }
                
                row.style.display = found ? '' : 'none';
            }
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = '/logout';
            }
        }

        // Toggle Management Menu (for dashboard cards)
        function toggleManagementMenu(menuType) {
            // Map menu types to their dashboard sections
            const dashboardMap = {
                'staff': 'staff-management-dashboard',
                'teacher': 'teacher-management-dashboard',
                'classes': 'classes-management-dashboard',
                'fee': 'fee-management-dashboard',
                'school': 'school-setup-dashboard'
            };

            const dashboardId = dashboardMap[menuType];
            if (!dashboardId) return;

            // Hide all sections
            const sections = document.querySelectorAll('.workspace-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Show the selected management dashboard
            const selectedSection = document.getElementById(dashboardId);
            if (selectedSection) {
                selectedSection.classList.add('active');
            }

            // Also open the corresponding sidebar menu
            const menuMap = {
                'school': '.sidebar nav li.has-submenu:nth-of-type(2)',
                'staff': '.sidebar nav li.has-submenu:nth-of-type(3)',
                'teacher': '.sidebar nav li.has-submenu:nth-of-type(4)',
                'classes': '.sidebar nav li.has-submenu:nth-of-type(5)',
                'fee': '.sidebar nav li.has-submenu:nth-of-type(6)'
            };

            const menuSelector = menuMap[menuType];
            if (menuSelector) {
                const menuItem = document.querySelector(menuSelector);
                if (menuItem) {
                    // Close all other submenus
                    const allSubmenus = document.querySelectorAll('.sidebar .has-submenu');
                    allSubmenus.forEach(item => {
                        item.classList.remove('open');
                        item.classList.remove('active');
                        const submenu = item.querySelector('.submenu');
                        if (submenu) {
                            submenu.classList.remove('show');
                        }
                    });

                    // Open and highlight the clicked menu
                    menuItem.classList.add('open');
                    menuItem.classList.add('active');
                    const submenu = menuItem.querySelector('.submenu');
                    if (submenu) {
                        submenu.classList.add('show');
                    }

                    // Scroll sidebar to make the menu visible
                    menuItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            }

            // Remove active state from all menu items
            const menuItems = document.querySelectorAll('.sidebar nav li');
            menuItems.forEach(item => {
                if (!item.classList.contains('has-submenu')) {
                    item.classList.remove('active');
                }
            });
        }

        // Teacher Management Functions
        function submitTeacherForm(event) {
            event.preventDefault();
            alert('Teacher added successfully! (Connect to backend)');
            resetTeacherForm();
        }

        function resetTeacherForm() {
            document.getElementById('addTeacherForm').reset();
        }

        function filterTeachers() {
            alert('Filter teachers by subject (Connect to backend)');
        }

        function searchTeacherTable() {
            alert('Search teachers (Connect to backend)');
        }

        function submitScheduleForm(event) {
            event.preventDefault();
            alert('Schedule added successfully! (Connect to backend)');
            resetScheduleForm();
        }

        function resetScheduleForm() {
            document.getElementById('teacherScheduleForm').reset();
        }

        function filterSchedule() {
            alert('Filter schedule by teacher (Connect to backend)');
        }

        function submitSubjectAssignment(event) {
            event.preventDefault();
            alert('Subject assigned successfully! (Connect to backend)');
            resetSubjectAssignForm();
        }

        function resetSubjectAssignForm() {
            document.getElementById('subjectAssignForm').reset();
        }

        // Classes Management Functions
        function submitClassForm(event) {
            event.preventDefault();
            alert('Class added successfully! (Connect to backend)');
            resetClassForm();
        }

        function resetClassForm() {
            document.getElementById('addClassForm').reset();
        }

        function filterClasses() {
            alert('Filter classes by level (Connect to backend)');
        }

        function searchClassTable() {
            alert('Search classes (Connect to backend)');
        }

        function submitSectionForm(event) {
            event.preventDefault();
            alert('Section created successfully! (Connect to backend)');
            resetSectionForm();
        }

        function resetSectionForm() {
            document.getElementById('classSectionForm').reset();
        }

        function filterSections() {
            alert('Filter sections by class (Connect to backend)');
        }

        function loadTimetable() {
            alert('Load timetable (Connect to backend)');
        }

        function createTimetable() {
            alert('Create new timetable entry (Connect to backend)');
        }

        function printTimetable() {
            alert('Print timetable (Connect to backend)');
        }

        function submitClassSubject(event) {
            event.preventDefault();
            alert('Subject added successfully! (Connect to backend)');
            resetClassSubjectForm();
        }

        function resetClassSubjectForm() {
            document.getElementById('classSubjectForm').reset();
        }

        function filterSubjects() {
            alert('Filter subjects by class (Connect to backend)');
        }
           const searchType = document.getElementById('searchType');
    const searchValue = document.getElementById('searchValue');
    const searchLabel = document.getElementById('searchLabel');
    const challanType = document.getElementById('challanType');
    const discountFile = document.getElementById('discountFile');

    searchType.addEventListener('change', function () {
        searchValue.disabled = false;
        searchValue.value = "";
        challanType.innerHTML = '<option value="">--Select Type--</option>'; // reset options

        if (this.value === 'applicantId') {
            searchLabel.textContent = "Enter Applicant ID *";
            searchValue.placeholder = "e.g. APP001";
            challanType.innerHTML += '<option value="admission">Admission Challan</option><option value="class">Class Fee Challan</option>';
        } 
        else if (this.value === 'bForm') {
            searchLabel.textContent = "Enter B-Form Number *";
            searchValue.placeholder = "e.g. 35202-1234567-1";
            challanType.innerHTML += '<option value="admission">Admission Challan</option><option value="class">Class Fee Challan</option>';
        } 
        else if (this.value === 'studentId') {
            searchLabel.textContent = "Enter Student ID *";
            searchValue.placeholder = "e.g. STD001";
            challanType.innerHTML += '<option value="class">Class Fee Challan</option>';
        } 
        else {
            searchValue.disabled = true;
            searchLabel.textContent = "Enter Value *";
            searchValue.placeholder = "";
        }
    });

    // Demo: Populate table on search click
    document.getElementById('searchBtn').addEventListener('click', function () {
        const tbody = document.querySelector('#studentTable tbody');
        tbody.innerHTML = `
            <tr>
                <td>STD001</td>
                <td>Ali Ahmed</td>
                <td>35202-1111111-1</td>
                <td>2008-04-12</td>
                <td>Ahmed Khan</td>
                <td>0300-1234567</td>
            </tr>
        `;
    });

    // Enable edit buttons when discount file is uploaded
    discountFile.addEventListener('change', function () {
        const editButtons = document.querySelectorAll('.edit-btn');
        editButtons.forEach(btn => {
            btn.disabled = false;
            btn.textContent = "Update";
        });
        const inputs = document.querySelectorAll('#feeTableBody input');
        inputs.forEach(i => i.disabled = false);
    });

    // Optional: Update total when values change
    document.getElementById('feeTableBody').addEventListener('input', () => {
        let total = 0;
        document.querySelectorAll('#feeTableBody input').forEach(input => {
            total += Number(input.value) || 0;
        });
        document.getElementById('totalAmount').textContent = total.toLocaleString();
    });
    </script>
</body>

</html>

